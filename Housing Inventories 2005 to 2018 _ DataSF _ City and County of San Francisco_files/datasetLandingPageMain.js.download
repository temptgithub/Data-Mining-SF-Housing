!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],executeModules=data[2],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()();return deferredModules.push.apply(deferredModules,executeModules||[]),checkDeferredModules()}function checkDeferredModules(){for(var result,i=0;i<deferredModules.length;i++){for(var deferredModule=deferredModules[i],fulfilled=!0,j=1;j<deferredModule.length;j++){var depId=deferredModule[j];0!==installedChunks[depId]&&(fulfilled=!1)}fulfilled&&(deferredModules.splice(i--,1),result=__webpack_require__(__webpack_require__.s=deferredModule[0]))}return result}var installedModules={},installedChunks={105:0},deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.r=function(exports){Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/javascripts/build/shared/";var jsonpArray=window.socrataFrontendWebpackJsonp=window.socrataFrontendWebpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([2859,1,0]),checkDeferredModules()}({149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.HANDLE_FETCH_ROW_COUNT_SUCCESS="HANDLE_FETCH_ROW_COUNT_SUCCESS",exports.HANDLE_FETCH_ROW_COUNT_ERROR="HANDLE_FETCH_ROW_COUNT_ERROR",exports.REQUESTED_VIEW_PUBLISH="REQUESTED_VIEW_PUBLISH",exports.HANDLE_VIEW_PUBLISH_SUCCESS="HANDLE_VIEW_PUBLISH_SUCCESS",exports.HANDLE_VIEW_PUBLISH_ERROR="HANDLE_VIEW_PUBLISH_ERROR",exports.CLEAR_VIEW_PUBLISH_ERROR="CLEAR_VIEW_PUBLISH_ERROR",exports.SET_CONTACT_FORM_FIELD="SET_CONTACT_FORM_FIELD",exports.SET_CONTACT_FORM_RECAPTCHA_LOADED="SET_CONTACT_FORM_RECAPTCHA_LOADED",exports.SET_CONTACT_FORM_ERRORS="SET_CONTACT_FORM_ERRORS",exports.SEND_CONTACT_FORM="SEND_CONTACT_FORM",exports.RESET_CONTACT_FORM="RESET_CONTACT_FORM",exports.HANDLE_CONTACT_FORM_SUCCESS="HANDLE_CONTACT_FORM_SUCCESS",exports.HANDLE_CONTACT_FORM_FAILURE="HANDLE_CONTACT_FORM_FAILURE",exports.HANDLE_CONTACT_FORM_RECAPTCHA_ERROR="HANDLE_CONTACT_FORM_RECAPTCHA_ERROR",exports.HANDLE_CONTACT_FORM_RECAPTCHA_RESET="HANDLE_CONTACT_FORM_RECAPTCHA_RESET",exports.TOGGLE_RELATED_VIEWS="TOGGLE_RELATED_VIEWS",exports.REQUEST_RELATED_VIEWS="REQUEST_RELATED_VIEWS",exports.RECEIVE_RELATED_VIEWS="RECEIVE_RELATED_VIEWS",exports.HANDLE_RELATED_VIEWS_ERROR="HANDLE_RELATED_VIEWS_ERROR",exports.DISMISS_RELATED_VIEWS_ERROR="DISMISS_RELATED_VIEWS_ERROR",exports.ADD_FEATURED_ITEM="ADD_FEATURED_ITEM",exports.EDIT_FEATURED_ITEM="EDIT_FEATURED_ITEM",exports.CANCEL_FEATURED_ITEM_EDIT="CANCEL_FEATURED_ITEM_EDIT",exports.REQUESTED_FEATURED_ITEM_SAVE="REQUESTED_FEATURED_ITEM_SAVE",exports.HANDLE_FEATURED_ITEM_SAVE_SUCCESS="HANDLE_FEATURED_ITEM_SAVE_SUCCESS",exports.HANDLE_FEATURED_ITEM_SAVE_ERROR="HANDLE_FEATURED_ITEM_SAVE_ERROR",exports.SET_EXTERNAL_RESOURCE_FIELD="SET_EXTERNAL_RESOURCE_FIELD",exports.SET_STORY_URL_FIELD="SET_STORY_URL_FIELD",exports.REQUESTED_STORY="REQUESTED_STORY",exports.HANDLE_LOADING_STORY_ERROR="HANDLE_LOADING_STORY_ERROR ",exports.HANDLE_LOADING_STORY_SUCCESS="HANDLE_LOADING_STORY_SUCCESS",exports.REQUESTED_FEATURED_ITEM_REMOVAL="REQUESTED_FEATURED_ITEM_REMOVAL",exports.HANDLE_FEATURED_ITEM_REMOVAL_SUCCESS="HANDLE_FEATURED_ITEM_REMOVAL_SUCCESS",exports.HANDLE_FEATURED_ITEM_REMOVAL_ERROR="HANDLE_FEATURED_ITEM_REMOVAL_ERROR",exports.SET_SAVING_FEATURED_ITEM="SET_SAVING_FEATURED_ITEM",exports.REQUESTED_DERIVED_VIEWS="REQUESTED_DERIVED_VIEWS",exports.HANDLE_DERIVED_VIEWS_REQUEST_ERROR="HANDLE_DERIVED_VIEWS_REQUEST_ERROR",exports.RECEIVE_DERIVED_VIEWS="RECEIVE_DERIVED_VIEWS",exports.ON_SUBSCRIPTION_CHANGE="ON_SUBSCRIPTION_CHANGE",exports.CHECK_SUBSCRIPTION_ON_LOAD="CHECK_SUBSCRIPTION_ON_LOAD",exports.HANDLE_CHECK_SUBSCRIPTION_ON_LOAD_ERROR="HANDLE_CHECK_SUBSCRIPTION_ON_LOAD_ERROR",exports.HANDLE_ALERT_NOTICE_CLOSE="HANDLE_ALERT_NOTICE_CLOSE",exports.HANDLE_ALERT_SAVE_SUCCESS="HANDLE_ALERT_SAVE_SUCCESS"},2795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlotlyModal=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PlotlyModal=exports.PlotlyModal=function(_Component){function PlotlyModal(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PlotlyModal),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PlotlyModal.__proto__||Object.getPrototypeOf(PlotlyModal)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PlotlyModal,_react.Component),_createClass(PlotlyModal,[{key:"render",value:function(){var _props=this.props,view=_props.view,onClickPlotly=_props.onClickPlotly;return _react2.default.createElement("div",{role:"dialog","aria-labelledby":"plotly-modal-title",id:"plotly-modal",className:"modal modal-overlay modal-hidden","data-modal-dismiss":!0},_react2.default.createElement("div",{className:"modal-container"},_react2.default.createElement("header",{className:"modal-header"},_react2.default.createElement("h2",{id:"plotly-modal-title",className:"h2 modal-header-title"},I18n.plotly_modal.title),_react2.default.createElement("button",{"aria-label":I18n.cancel,className:"btn btn-transparent modal-header-dismiss","data-modal-dismiss":!0},_react2.default.createElement("span",{className:"icon-close-2"}))),_react2.default.createElement("section",{className:"modal-content"},I18n.plotly_modal.modal_content,_react2.default.createElement("div",{className:"alert info"},_react2.default.createElement("span",{className:"icon-info"}),_react2.default.createElement("div",null,I18n.plotly_modal.alert)),I18n.plotly_modal.learn_more_link," ",_react2.default.createElement("br",null),_react2.default.createElement("a",{href:"https://support.socrata.com/hc/en-us/articles/115010730868"},"https://support.socrata.com/hc/en-us/articles/115010730868")),_react2.default.createElement("footer",{className:"modal-actions"},_react2.default.createElement("a",{className:"btn btn-default btn-sm","data-modal-dismiss":!0},I18n.close),_react2.default.createElement("a",{href:view.plotlyUrl,"data-id":view.id,className:"btn btn-primary btn-sm",onClick:onClickPlotly},I18n.open))))}}]),PlotlyModal}();PlotlyModal.propTypes={onClickPlotly:_propTypes2.default.func.isRequired,view:_propTypes2.default.object.isRequired},exports.default=(0,_reactRedux.connect)(function(state){return _lodash2.default.pick(state,"view")},function(){return{onClickPlotly:function(){}}})(PlotlyModal)},2796:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CartoModal=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CartoModal=exports.CartoModal=function(_Component){function CartoModal(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CartoModal),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CartoModal.__proto__||Object.getPrototypeOf(CartoModal)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CartoModal,_react.Component),_createClass(CartoModal,[{key:"render",value:function(){var _props=this.props,view=_props.view,onClickCarto=_props.onClickCarto;return _react2.default.createElement("div",{role:"dialog","aria-labelledby":"carto-modal-title",id:"carto-modal",className:"modal modal-overlay modal-hidden","data-modal-dismiss":!0},_react2.default.createElement("div",{className:"modal-container"},_react2.default.createElement("header",{className:"modal-header"},_react2.default.createElement("h2",{id:"carto-modal-title",className:"h2 modal-header-title"},I18n.carto_modal.title),_react2.default.createElement("button",{"aria-label":I18n.cancel,className:"btn btn-transparent modal-header-dismiss","data-modal-dismiss":!0},_react2.default.createElement("span",{className:"icon-close-2"}))),_react2.default.createElement("section",{className:"modal-content"},I18n.carto_modal.modal_content,_react2.default.createElement("div",{className:"alert info"},_react2.default.createElement("span",{className:"icon-info"}),_react2.default.createElement("div",null,I18n.carto_modal.alert)),I18n.carto_modal.learn_more_link," ",_react2.default.createElement("br",null),_react2.default.createElement("a",{href:"https://support.socrata.com/hc/en-us/articles/115010730868"},"https://support.socrata.com/hc/en-us/articles/115010730868")),_react2.default.createElement("footer",{className:"modal-actions"},_react2.default.createElement("a",{className:"btn btn-default btn-sm","data-modal-dismiss":!0},I18n.close),_react2.default.createElement("a",{href:view.cartoUrl,"data-id":view.id,className:"btn btn-primary btn-sm",onClick:onClickCarto},I18n.open))))}}]),CartoModal}();CartoModal.propTypes={onClickCarto:_propTypes2.default.func.isRequired,view:_propTypes2.default.object.isRequired},exports.default=(0,_reactRedux.connect)(function(state){return _lodash2.default.pick(state,"view")},function(){return{onClickCarto:function(){}}})(CartoModal)},2797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewSelector=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_classnames2=_interopRequireDefault(__webpack_require__(8)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_components=__webpack_require__(9),_viewCardHelpers=__webpack_require__(231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ViewSelector=exports.ViewSelector=function(_Component){function ViewSelector(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ViewSelector);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ViewSelector.__proto__||Object.getPrototypeOf(ViewSelector)).call(this,props));return _this.I18n=I18n.featured_content_modal.internal_resource_selector,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ViewSelector,_react.Component),_createClass(ViewSelector,[{key:"renderChooseButton",value:function(viewUid){var _props=this.props,onClickChoose=_props.onClickChoose,isSaving=_props.isSaving,isSaved=_props.isSaved,isSavingViewUid=_props.isSavingViewUid,hasSaveError=_props.hasSaveError,isSavingSelf=isSavingViewUid===viewUid,renderSavingButton=isSaving&&isSavingSelf,renderSavedButton=isSaved&&isSavingSelf,renderErrorButton=hasSaveError&&isSavingSelf,chooseButtonClassName=(0,_classnames2.default)({btn:!0,"btn-primary":!0,"view-select":!0,"btn-busy":renderSavingButton,"btn-success":renderSavedButton,"btn-error":renderErrorButton}),chooseButtonContents=void 0;return chooseButtonContents=renderSavingButton?_react2.default.createElement("div",{className:"spinner-default spinner-btn-primary"}):renderSavedButton?I18n.saved+"!":renderErrorButton?I18n.error:I18n.choose,_react2.default.createElement("button",{className:chooseButtonClassName,disabled:renderSavingButton,onClick:_lodash2.default.partial(onClickChoose,viewUid)},chooseButtonContents)}},{key:"render",value:function(){var _this2=this,_props2=this.props,viewList=_props2.viewList,renderNoViews=_props2.renderNoViews,viewContent=void 0;return viewContent=0===viewList.length?renderNoViews():_lodash2.default.map(viewList,function(relatedView,i){return _react2.default.createElement(_components.ViewCard,_extends({},(0,_viewCardHelpers.getViewCardPropsForView)(relatedView),{key:i}),_this2.renderChooseButton(relatedView.id))}),_react2.default.createElement("div",{className:"internal-view-list"},viewContent)}}]),ViewSelector}();ViewSelector.propTypes={hasSaveError:_propTypes2.default.bool,isSaved:_propTypes2.default.bool,isSaving:_propTypes2.default.bool,isSavingViewUid:_propTypes2.default.string,onClickChoose:_propTypes2.default.func,renderNoViews:_propTypes2.default.func,viewList:_propTypes2.default.array.isRequired},exports.default=ViewSelector},2798:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewSelectorModal=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_reactRedux=__webpack_require__(4),_featuredContent=__webpack_require__(369),_BootstrapAlert2=_interopRequireDefault(__webpack_require__(939)),_FeaturedContentModalHeader2=_interopRequireDefault(__webpack_require__(463)),_FormFooter2=_interopRequireDefault(__webpack_require__(626)),_ViewSelector2=_interopRequireDefault(__webpack_require__(2797));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ViewSelectorModal=exports.ViewSelectorModal=function(_Component){function ViewSelectorModal(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ViewSelectorModal);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ViewSelectorModal.__proto__||Object.getPrototypeOf(ViewSelectorModal)).call(this,props));return _this.I18n=I18n.featured_content_modal.view_selector_modal,_lodash2.default.bindAll(_this,"renderNoViews"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ViewSelectorModal,_react.Component),_createClass(ViewSelectorModal,[{key:"componentWillMount",value:function(){this.props.fetchViews()}},{key:"componentDidMount",value:function(){_reactDom2.default.findDOMNode(this).querySelector("h2").focus()}},{key:"renderBackButton",value:function(){var onClickCancel=this.props.onClickCancel;return _react2.default.createElement("button",{className:"btn btn-default btn-simple btn-xs back-button",onClick:onClickCancel},_react2.default.createElement("span",{className:"icon-arrow-prev"}),I18n.back)}},{key:"renderContent",value:function(){var _props=this.props,hasSaveError=_props.hasSaveError,hasViewFetchError=_props.hasViewFetchError,isLoading=_props.isLoading,isSaved=_props.isSaved,isSaving=_props.isSaving,isSavingViewUid=_props.isSavingViewUid,onClickChoose=_props.onClickChoose,viewList=_props.viewList;if(isLoading)return _react2.default.createElement("span",{className:"spinner-default spinner-large"});if(hasViewFetchError)return _react2.default.createElement("div",{className:"alert warning"},_react2.default.createElement("span",null,this.I18n.view_fetch_error));var viewSelectorProps={hasSaveError:hasSaveError,isSaved:isSaved,isSaving:isSaving,isSavingViewUid:isSavingViewUid,onClickChoose:onClickChoose,renderNoViews:this.renderNoViews,viewList:viewList};return _react2.default.createElement(_ViewSelector2.default,viewSelectorProps)}},{key:"renderNoViews",value:function(){var bootstrapUrl=this.props.bootstrapUrl;return _react2.default.createElement(_BootstrapAlert2.default,{bootstrapUrl:bootstrapUrl})}},{key:"renderFooter",value:function(){var onClickCancel=this.props.onClickCancel,footerProps={cancelText:I18n.cancel,onClickCancel:onClickCancel};return _react2.default.createElement(_FormFooter2.default,footerProps)}},{key:"renderSaveError",value:function(){if(this.props.hasSaveError)return _react2.default.createElement("div",{className:"alert error"},I18n.featured_content_modal.save_error_message)}},{key:"render",value:function(){var onClickClose=this.props.onClickClose;return _react2.default.createElement("div",{className:"modal-container"},_react2.default.createElement(_FeaturedContentModalHeader2.default,{onClickClose:onClickClose}),_react2.default.createElement("div",{className:"modal-content"},_react2.default.createElement("div",{className:"container"},this.renderBackButton(),_react2.default.createElement("h2",{tabIndex:"0"},this.I18n.header),_react2.default.createElement("p",null,this.I18n.message),this.renderSaveError(),this.renderContent())),this.renderFooter())}}]),ViewSelectorModal}();ViewSelectorModal.propTypes={bootstrapUrl:_propTypes2.default.string,hasSaveError:_propTypes2.default.bool,hasViewFetchError:_propTypes2.default.bool,isLoading:_propTypes2.default.bool,isSaving:_propTypes2.default.bool,isSavingViewUid:_propTypes2.default.string,isSaved:_propTypes2.default.bool,onClickCancel:_propTypes2.default.func,onClickChoose:_propTypes2.default.func,onClickClose:_propTypes2.default.func,fetchViews:_propTypes2.default.func,viewList:_propTypes2.default.array.isRequired},exports.default=(0,_reactRedux.connect)(function(state){return _extends({bootstrapUrl:state.view.bootstrapUrl},state.featuredContent,state.featuredContent.viewSelector)},function(dispatch){return{onClickCancel:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},onClickChoose:function(uid){dispatch((0,_featuredContent.saveFeaturedItem)({featuredLensUid:uid}))},onClickClose:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},fetchViews:function(){dispatch((0,_featuredContent.requestDerivedViews)())}}})(ViewSelectorModal)},2799:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StoryForm=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_reactRedux=__webpack_require__(4),_FeaturedContentModalHeader2=_interopRequireDefault(__webpack_require__(463)),_FormFooter2=_interopRequireDefault(__webpack_require__(626)),_components=__webpack_require__(9),_viewCardHelpers=__webpack_require__(231),_featuredContent=__webpack_require__(369);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StoryForm=exports.StoryForm=function(_Component){function StoryForm(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StoryForm);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(StoryForm.__proto__||Object.getPrototypeOf(StoryForm)).call(this,props));return _this.I18n=I18n.featured_content_modal.story_form,_lodash2.default.bindAll(_this,"onChangeUrl"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(StoryForm,_react.Component),_createClass(StoryForm,[{key:"componentDidMount",value:function(){_reactDom2.default.findDOMNode(this).querySelector("h2").focus(),this.loadRequestedStory=_lodash2.default.debounce(this.loadRequestedStory,500,{leading:!0}),this.loadStoryIfNeeded()}},{key:"componentDidUpdate",value:function(){if(this.loadStoryIfNeeded(),this.props.hasSaveError){var invalidField=_reactDom2.default.findDOMNode(this).querySelector('[aria-invalid="true"]');invalidField&&invalidField.focus()}}},{key:"onChangeUrl",value:function(event){this.props.onChangeUrl(event.target.value)}},{key:"onSubmit",value:function(event){event.preventDefault()}},{key:"loadRequestedStory",value:function(){this.props.loadRequestedStory()}},{key:"loadStoryIfNeeded",value:function(){this.props.shouldLoadStory&&this.loadRequestedStory()}},{key:"renderForm",value:function(){var _props=this.props,url=_props.url,hasSaveError=_props.hasSaveError,hasValidationError=_props.hasValidationError,validationWarning=hasValidationError?_react2.default.createElement("div",{className:"alert warning"},this.I18n.invalid_url_message):null;return _react2.default.createElement("form",{className:"story-form",onSubmit:this.onSubmit},_react2.default.createElement("label",{id:"story-url-label",htmlFor:"story-url",className:"block-label label-url"},this.I18n.url),_react2.default.createElement("input",{id:"story-url",className:"text-input url",type:"text",value:url,placeholder:"https://example.com/stories/s/abcd-efgh","aria-labelledby":"story-url-label","aria-invalid":hasValidationError||hasSaveError,onChange:this.onChangeUrl}),validationWarning)}},{key:"renderPreview",value:function(){var contents=void 0,_props2=this.props,description=_props2.description,title=_props2.title,createdAt=_props2.createdAt,viewCount=_props2.viewCount,canSave=_props2.canSave,imageUrl=_props2.imageUrl,isLoadingStory=_props2.isLoadingStory,isPrivate=_props2.isPrivate;if(canSave){var cardProps={name:title,description:description,icon:"icon-story",imageUrl:imageUrl,isPrivate:isPrivate,metadataLeft:(0,_viewCardHelpers.getDateLabel)(createdAt),metadataRight:(0,_viewCardHelpers.getViewCountLabel)(viewCount)};contents=_react2.default.createElement(_components.ViewCard,cardProps)}else contents=isLoadingStory?_react2.default.createElement("div",{className:"spinner-wrapper"},_react2.default.createElement("span",{className:"spinner-default spinner-large"})):_react2.default.createElement("div",{className:"placeholder"});return _react2.default.createElement("div",{className:"story-preview","aria-label":I18n.featured_content_modal.preview},contents)}},{key:"renderContent",value:function(){var _props3=this.props,hasSaveError=_props3.hasSaveError,onClickCancel=_props3.onClickCancel,backButton=_react2.default.createElement("button",{className:"btn btn-default btn-simple btn-xs back-button",onClick:onClickCancel},_react2.default.createElement("span",{className:"icon-arrow-prev"}),I18n.back),saveError=hasSaveError?_react2.default.createElement("div",{className:"alert error"},I18n.featured_content_modal.save_error_message):null;return _react2.default.createElement("div",{className:"modal-content story"},_react2.default.createElement("div",{className:"container"},backButton,_react2.default.createElement("h2",{tabIndex:"0"},this.I18n.header),_react2.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.I18n.message_html}}),_react2.default.createElement("div",{className:"story-contents"},this.renderForm(),this.renderPreview()),saveError))}},{key:"renderFooter",value:function(){var _props4=this.props,canSave=_props4.canSave,isSaved=_props4.isSaved,isSaving=_props4.isSaving,onClickCancel=_props4.onClickCancel,onClickSave=_props4.onClickSave,footerProps={cancelText:I18n.cancel,canSave:canSave,displaySaveButton:!0,isSaved:isSaved,isSaving:isSaving,onClickCancel:onClickCancel,onClickSave:onClickSave,saveText:I18n.save,savedText:I18n.saved+"!"};return _react2.default.createElement(_FormFooter2.default,footerProps)}},{key:"render",value:function(){var onClickClose=this.props.onClickClose;return _react2.default.createElement("div",{className:"modal-container"},_react2.default.createElement(_FeaturedContentModalHeader2.default,{onClickClose:onClickClose}),this.renderContent(),this.renderFooter())}}]),StoryForm}();StoryForm.propTypes={canSave:_propTypes2.default.bool,createdAt:_propTypes2.default.string,description:_propTypes2.default.string,hasSaveError:_propTypes2.default.bool,hasValidationError:_propTypes2.default.bool,imageUrl:_propTypes2.default.string,isLoadingStory:_propTypes2.default.bool,isPrivate:_propTypes2.default.bool,isSaved:_propTypes2.default.bool,isSaving:_propTypes2.default.bool,loadRequestedStory:_propTypes2.default.func,onChangeUrl:_propTypes2.default.func,onClickCancel:_propTypes2.default.func,onClickClose:_propTypes2.default.func,onClickSave:_propTypes2.default.func,shouldLoadStory:_propTypes2.default.bool,title:_propTypes2.default.string,url:_propTypes2.default.string,viewCount:_propTypes2.default.number},StoryForm.defaultProps={loadRequestedStory:_lodash2.default.noop,onChangeUrl:_lodash2.default.noop},exports.default=(0,_reactRedux.connect)(function(state){return _extends({},state.featuredContent,state.featuredContent.story)},function(dispatch){return{loadRequestedStory:function(){dispatch((0,_featuredContent.loadStory)())},onClickCancel:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},onClickClose:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},onClickSave:function(){dispatch((0,_featuredContent.saveFeaturedItem)())},onChangeUrl:function(url){dispatch((0,_featuredContent.setStoryUrlField)(url))}}})(StoryForm)},2800:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeaturedItemSelector=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_classnames2=_interopRequireDefault(__webpack_require__(8)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_reactRedux=__webpack_require__(4),_feature_flags=__webpack_require__(17),_FeaturedViewCard2=_interopRequireDefault(__webpack_require__(945)),_FeaturedContentModalHeader2=_interopRequireDefault(__webpack_require__(463)),_featuredContent=__webpack_require__(369);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FeaturedItemSelector=exports.FeaturedItemSelector=function(_Component){function FeaturedItemSelector(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FeaturedItemSelector);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FeaturedItemSelector.__proto__||Object.getPrototypeOf(FeaturedItemSelector)).call(this,props));return _this.state={showPlaceholderDetails:[!1,!1,!1]},_lodash2.default.bindAll(_this,"onClickPreAdd"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FeaturedItemSelector,_react.Component),_createClass(FeaturedItemSelector,[{key:"componentDidMount",value:function(){_reactDom2.default.findDOMNode(this).querySelector("h2").focus()}},{key:"onClickPreAdd",value:function(position){var _props=this.props,isBlobby=_props.isBlobby,isHref=_props.isHref,showPlaceholderDetails=this.state.showPlaceholderDetails;if(showPlaceholderDetails[position]=!0,isBlobby||isHref)return this.props.onClickAdd("externalResource",position);this.setState({showPlaceholderDetails:showPlaceholderDetails})}},{key:"renderAddButton",value:function(index,type,text){var onClickAdd=this.props.onClickAdd;return _react2.default.createElement("button",{className:"btn btn-default btn-wide",key:text,onClick:_lodash2.default.partial(onClickAdd,type,index)},text)}},{key:"renderEditButton",value:function(index){var _props2=this.props,contentList=_props2.contentList,onClickEdit=_props2.onClickEdit;return _react2.default.createElement("button",{className:"btn btn-alternate-2 edit-button",key:"change",onClick:_lodash2.default.partial(onClickEdit,index,contentList[index])},_react2.default.createElement("span",{className:"icon-edit"}),I18n.change)}},{key:"renderRemoveButton",value:function(index){var _props3=this.props,contentList=_props3.contentList,isRemoving=_props3.isRemoving,removePosition=_props3.removePosition,onClickRemove=_props3.onClickRemove,contents=void 0,onClick=void 0,style=void 0;return isRemoving&&removePosition===index?(contents=_react2.default.createElement("div",{className:"spinner-default spinner-btn-primary"}),onClick=null,style={paddingBottom:6}):(contents=_react2.default.createElement("div",null,_react2.default.createElement("span",{className:"icon-close"}),I18n.remove),onClick=_lodash2.default.partial(onClickRemove,index,contentList[index]),style=null),_react2.default.createElement("button",{className:"btn btn-alternate-2 btn-inverse remove-button",key:"remove",onClick:onClick,style:style},contents)}},{key:"renderActionButtons",value:function(index){var contentList=this.props.contentList,showPlaceholderDetails=this.state.showPlaceholderDetails;return _lodash2.default.isNull(contentList[index])?showPlaceholderDetails[index]?_feature_flags.FeatureFlags.value("stories_enabled")?[this.renderAddButton(index,"visualization",I18n.featured_content_modal.visualization),this.renderAddButton(index,"story",I18n.featured_content_modal.story),this.renderAddButton(index,"externalResource",I18n.featured_content_modal.external)]:[this.renderAddButton(index,"visualization",I18n.featured_content_modal.visualization),this.renderAddButton(index,"externalResource",I18n.featured_content_modal.external)]:_react2.default.createElement("button",{className:"btn btn-alternate-2 btn-inverse btn-wide",onClick:_lodash2.default.partial(this.onClickPreAdd,index)},I18n.add+"..."):_react2.default.createElement("div",{className:"featured-content-buttons btn-group-vertical"},this.renderEditButton(index),this.renderRemoveButton(index))}},{key:"renderFooter",value:function(){var onClickDone=this.props.onClickDone;return _react2.default.createElement("footer",{className:"modal-footer"},_react2.default.createElement("div",{className:"modal-footer-actions"},_react2.default.createElement("button",{key:"done",className:"btn btn-primary btn-sm done-button","data-modal-dismiss":!0,onClick:onClickDone},I18n.done)))}},{key:"renderContent",value:function(){var _this2=this,_props4=this.props,contentList=_props4.contentList,isRemoving=_props4.isRemoving,removePosition=_props4.removePosition,isBlobby=_props4.isBlobby,isHref=_props4.isHref,introduction=isBlobby||isHref?I18n.featured_content_modal.introduction_external:I18n.featured_content_modal.introduction,items=_lodash2.default.map(contentList,function(featuredItem,i){var actionButtons=_this2.renderActionButtons(i),className=(0,_classnames2.default)("featured-item",{placeholder:_lodash2.default.isEmpty(featuredItem),"show-buttons":isRemoving&&removePosition===i});return _lodash2.default.isObject(featuredItem)?_react2.default.createElement("div",{className:className,key:i},_react2.default.createElement(_FeaturedViewCard2.default,{featuredItem:featuredItem},actionButtons)):_react2.default.createElement("div",{className:className,key:i},_react2.default.createElement("div",{className:"view-widget-overlay"},actionButtons))});return _react2.default.createElement("div",{className:"modal-content"},_react2.default.createElement("div",{className:"container"},_react2.default.createElement("h2",{tabIndex:"0"},I18n.featured_content_modal.title),_react2.default.createElement("p",null,introduction),_react2.default.createElement("div",{className:"featured-content"},items),this.renderRemoveError()))}},{key:"renderRemoveError",value:function(){return this.props.hasRemoveError?_react2.default.createElement("div",{className:"alert error remove-error"},I18n.featured_content_modal.remove_error):null}},{key:"render",value:function(){var onClickClose=this.props.onClickClose;return _react2.default.createElement("div",{className:"modal-container"},_react2.default.createElement(_FeaturedContentModalHeader2.default,{onClickClose:onClickClose}),this.renderContent(),this.renderFooter())}}]),FeaturedItemSelector}();FeaturedItemSelector.propTypes={contentList:_propTypes2.default.array.isRequired,hasRemoveError:_propTypes2.default.bool,isBlobby:_propTypes2.default.bool,isHref:_propTypes2.default.bool,isRemoving:_propTypes2.default.bool,onClickAdd:_propTypes2.default.func,onClickClose:_propTypes2.default.func,onClickDone:_propTypes2.default.func,onClickEdit:_propTypes2.default.func,onClickRemove:_propTypes2.default.func,removePosition:_propTypes2.default.number,renderHeader:_propTypes2.default.func},FeaturedItemSelector.defaultProps={onClickAdd:_lodash2.default.noop,onClickDone:_lodash2.default.noop,onClickEdit:_lodash2.default.noop,onClickRemove:_lodash2.default.noop},exports.default=(0,_reactRedux.connect)(function(state){return _extends({},state.featuredContent,{isBlobby:state.view.isBlobby,isHref:state.view.isHref})},function(dispatch){return{onClickAdd:function(type,position){dispatch((0,_featuredContent.addFeaturedItem)(type,position))},onClickClose:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},onClickDone:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},onClickEdit:function(position,featuredItem){dispatch((0,_featuredContent.editFeaturedItem)(featuredItem))},onClickRemove:function(position){window.confirm(I18n.featured_content_modal.remove_prompt)&&dispatch((0,_featuredContent.removeFeaturedItem)(position))}}})(FeaturedItemSelector)},2801:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExternalResourceForm=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_reactRedux=__webpack_require__(4),_constants=__webpack_require__(219),_components=__webpack_require__(9),_FeaturedContentModalHeader2=_interopRequireDefault(__webpack_require__(463)),_FormFooter2=_interopRequireDefault(__webpack_require__(626)),_featuredContent=__webpack_require__(369);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExternalResourceForm=exports.ExternalResourceForm=function(_Component){function ExternalResourceForm(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExternalResourceForm);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ExternalResourceForm.__proto__||Object.getPrototypeOf(ExternalResourceForm)).call(this,props));return _this.state={isImageInvalid:!1},_this.I18n=I18n.featured_content_modal.external_resource_form,_lodash2.default.bindAll(_this,"onChangeDescription","onChangePreviewImage","onChangeTitle","onChangeUrl"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ExternalResourceForm,_react.Component),_createClass(ExternalResourceForm,[{key:"componentDidMount",value:function(){_reactDom2.default.findDOMNode(this).querySelector("h2").focus()}},{key:"onChangeDescription",value:function(event){this.props.onChangeDescription(event.target.value)}},{key:"onChangePreviewImage",value:function(event){var onChangePreviewImage=this.props.onChangePreviewImage,file=event.target.files[0],isFileImage=file&&/\.(jpe?g|png|gif)$/i.test(file.name);if(this.setState({isImageInvalid:!isFileImage}),isFileImage){var fileReader=new FileReader;fileReader.addEventListener("load",function(){var dataUrl=fileReader.result;onChangePreviewImage(dataUrl)},!1),file&&fileReader.readAsDataURL(file)}}},{key:"onChangeTitle",value:function(event){this.props.onChangeTitle(event.target.value)}},{key:"onChangeUrl",value:function(event){this.props.onChangeUrl(event.target.value)}},{key:"onSubmit",value:function(event){event.preventDefault()}},{key:"renderInputField",value:function(key,inputProps){var prefix="external-resource",value=this.props[key],onChange=this["onChange"+_lodash2.default.upperFirst(key)],kebabKey=_lodash2.default.kebabCase(key);return"file"!==(inputProps=_lodash2.default.defaults(inputProps,{id:prefix+"-"+kebabKey,className:"text-input "+kebabKey,type:"text","aria-labelledby":prefix+"-"+kebabKey+"-label",onChange:onChange})).type&&(inputProps.value=value),_react2.default.createElement("div",null,_react2.default.createElement("label",{id:prefix+"-"+kebabKey+"-label",htmlFor:prefix+"-"+kebabKey,className:"block-label label-"+kebabKey},this.I18n[_lodash2.default.snakeCase(key)]),_react2.default.createElement("input",inputProps))}},{key:"renderPreview",value:function(){var _props=this.props,description=_props.description,previewImage=_props.previewImage,title=_props.title,cardProps={description:_lodash2.default.isEmpty(description)?this.I18n.description:description,imageUrl:_lodash2.default.isEmpty(previewImage)?null:previewImage,name:_lodash2.default.isEmpty(title)?this.I18n.title:title};return _react2.default.createElement(_components.ExternalViewCard,cardProps)}},{key:"renderContent",value:function(){var _props2=this.props,url=_props2.url,hasSaveError=_props2.hasSaveError,onClickCancel=_props2.onClickCancel,isImageInvalid=this.state.isImageInvalid,isUrlInvalid=!_lodash2.default.isEmpty(url)&&!_constants.VALID_URL_REGEX.test(url),backButton=_react2.default.createElement("button",{className:"btn btn-default btn-simple btn-xs back-button",onClick:onClickCancel},_react2.default.createElement("span",{className:"icon-arrow-prev"}),I18n.back),titleField=this.renderInputField("title",{maxLength:80}),descriptionField=this.renderInputField("description",{maxLength:160}),urlField=this.renderInputField("url",{placeholder:"https://example.com","aria-invalid":isUrlInvalid}),previewImageField=this.renderInputField("previewImage",{type:"file",className:"file-input preview-image"}),urlWarning=isUrlInvalid?_react2.default.createElement("div",{className:"alert warning"},this.I18n.invalid_url_message):null,imageWarning=isImageInvalid?_react2.default.createElement("div",{className:"alert error"},this.I18n.invalid_image_message):null,saveError=hasSaveError?_react2.default.createElement("div",{className:"alert error"},I18n.featured_content_modal.save_error_message):null;return _react2.default.createElement("div",{className:"modal-content external-resource"},_react2.default.createElement("div",{className:"container"},backButton,_react2.default.createElement("h2",{tabIndex:"0"},this.I18n.header),_react2.default.createElement("p",null,this.I18n.message),_react2.default.createElement("div",{className:"external-resource-contents"},_react2.default.createElement("form",{className:"external-resource-form",onSubmit:this.onSubmit},titleField,descriptionField,urlField,urlWarning,previewImageField,imageWarning),_react2.default.createElement("div",{className:"external-resource-preview"},this.renderPreview())),saveError))}},{key:"renderFooter",value:function(){var _props3=this.props,canSave=_props3.canSave,isSaved=_props3.isSaved,isSaving=_props3.isSaving,onClickCancel=_props3.onClickCancel,onClickSave=_props3.onClickSave,isImageInvalid=this.state.isImageInvalid,footerProps={cancelText:I18n.cancel,canSave:canSave&&!isImageInvalid,displaySaveButton:!0,isSaved:isSaved,isSaving:isSaving,onClickCancel:onClickCancel,onClickSave:onClickSave,saveText:I18n.save,savedText:I18n.saved+"!"};return _react2.default.createElement(_FormFooter2.default,footerProps)}},{key:"render",value:function(){var onClickClose=this.props.onClickClose;return _react2.default.createElement("div",{className:"modal-container"},_react2.default.createElement(_FeaturedContentModalHeader2.default,{onClickClose:onClickClose}),this.renderContent(),this.renderFooter())}}]),ExternalResourceForm}();ExternalResourceForm.propTypes={canSave:_propTypes2.default.bool,description:_propTypes2.default.string,hasSaveError:_propTypes2.default.bool,previewImage:_propTypes2.default.string,isSaved:_propTypes2.default.bool,isSaving:_propTypes2.default.bool,onChangeDescription:_propTypes2.default.func,onChangePreviewImage:_propTypes2.default.func,onChangeTitle:_propTypes2.default.func,onChangeUrl:_propTypes2.default.func,onClickCancel:_propTypes2.default.func,onClickClose:_propTypes2.default.func,onClickSave:_propTypes2.default.func,title:_propTypes2.default.string,url:_propTypes2.default.string},ExternalResourceForm.defaultProps={onChangeDescription:_lodash2.default.noop,onChangePreviewImage:_lodash2.default.noop,onChangeTitle:_lodash2.default.noop,onChangeUrl:_lodash2.default.noop},exports.default=(0,_reactRedux.connect)(function(state){return _extends({},state.featuredContent,state.featuredContent.externalResource)},function(dispatch){return{onChangeDescription:function(description){dispatch((0,_featuredContent.setExternalResourceField)("description",description))},onChangeTitle:function(title){dispatch((0,_featuredContent.setExternalResourceField)("title",title))},onChangeUrl:function(url){dispatch((0,_featuredContent.setExternalResourceField)("url",url))},onChangePreviewImage:function(previewImage){dispatch((0,_featuredContent.setExternalResourceField)("previewImage",previewImage))},onClickCancel:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},onClickClose:function(){dispatch((0,_featuredContent.cancelFeaturedItemEdit)())},onClickSave:function(){dispatch((0,_featuredContent.saveFeaturedItem)())}}})(ExternalResourceForm)},2802:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeaturedContentModal=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_redux=__webpack_require__(14),_reactRedux=__webpack_require__(4),_ExternalResourceForm2=_interopRequireDefault(__webpack_require__(2801)),_FeaturedItemSelector2=_interopRequireDefault(__webpack_require__(2800)),_StoryForm2=_interopRequireDefault(__webpack_require__(2799)),_ViewSelectorModal2=_interopRequireDefault(__webpack_require__(2798)),_keycodes_deprecated=__webpack_require__(66),_featuredContent=__webpack_require__(369);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FeaturedContentModal=exports.FeaturedContentModal=function(_Component){function FeaturedContentModal(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FeaturedContentModal);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FeaturedContentModal.__proto__||Object.getPrototypeOf(FeaturedContentModal)).call(this,props));return _lodash2.default.bindAll(_this,"onKeyUp"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FeaturedContentModal,_react.Component),_createClass(FeaturedContentModal,[{key:"componentWillMount",value:function(){document.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.onKeyUp)}},{key:"onKeyUp",value:function(event){var isModalHidden=_reactDom2.default.findDOMNode(this).classList.contains("modal-hidden"),isKeyEscape=event.keyCode===_keycodes_deprecated.ESCAPE;!isModalHidden&&isKeyEscape&&this.props.onPressEscape()}},{key:"renderContent",value:function(){var _props=this.props,isEditing=_props.isEditing,editType=_props.editType;return isEditing?"externalResource"===editType?_react2.default.createElement(_ExternalResourceForm2.default,null):"story"===editType?_react2.default.createElement(_StoryForm2.default,null):"visualization"===editType?_react2.default.createElement(_ViewSelectorModal2.default,null):void 0:_react2.default.createElement(_FeaturedItemSelector2.default,null)}},{key:"render",value:function(){return _react2.default.createElement("div",{id:"featured-content-modal",className:"modal modal-overlay modal-full modal-hidden","data-modal-dismiss":!0},this.renderContent())}}]),FeaturedContentModal}();FeaturedContentModal.propTypes={isEditing:_propTypes2.default.bool,editType:_propTypes2.default.string,onPressEscape:_propTypes2.default.func},exports.default=(0,_reactRedux.connect)(function(state){return state.featuredContent},function(dispatch){return(0,_redux.bindActionCreators)({onPressEscape:_featuredContent.cancelFeaturedItemEdit},dispatch)})(FeaturedContentModal)},2803:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_classnames2=_interopRequireDefault(__webpack_require__(8));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TextArea=function(_Component){function TextArea(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TextArea);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(TextArea.__proto__||Object.getPrototypeOf(TextArea)).call(this,props));return _this.state={dirty:!1},_lodash2.default.bindAll(_this,"onBlur"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(TextArea,_react.Component),_createClass(TextArea,[{key:"onBlur",value:function(){this.setState({dirty:!0})}},{key:"render",value:function(){var _props=this.props,field=_props.field,label=_props.label,name=_props.name,onChange=_props.onChange,classes=(0,_classnames2.default)("text-input text-area",name),labelId=name+"-label",isInvalid=field.invalid&&this.state.dirty;return _react2.default.createElement("div",null,_react2.default.createElement("label",{id:labelId,htmlFor:name,className:"block-label"},label),_react2.default.createElement("textarea",{id:name,className:classes,value:field.value,"aria-invalid":isInvalid,"aria-labelledby":labelId,"aria-required":!0,onChange:onChange,onBlur:this.onBlur}))}}]),TextArea}();TextArea.propTypes={field:_propTypes2.default.object.isRequired,label:_propTypes2.default.string.isRequired,name:_propTypes2.default.string.isRequired,onChange:_propTypes2.default.func},exports.default=TextArea},2804:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_classnames2=_interopRequireDefault(__webpack_require__(8));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TextInput=function(_Component){function TextInput(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TextInput);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).call(this,props));return _this.state={dirty:!1},_lodash2.default.bindAll(_this,"onBlur"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(TextInput,_react.Component),_createClass(TextInput,[{key:"onBlur",value:function(){this.setState({dirty:!0})}},{key:"render",value:function(){var _props=this.props,description=_props.description,field=_props.field,label=_props.label,name=_props.name,onChange=_props.onChange,classes=(0,_classnames2.default)("text-input",name),labelId=name+"-label",descriptionElement=description?_react2.default.createElement("span",{id:"description",className:"x-small quiet"},description):null,isInvalid=field.invalid&&this.state.dirty;return _react2.default.createElement("div",null,_react2.default.createElement("label",{id:labelId,htmlFor:name,className:"block-label"},label,descriptionElement),_react2.default.createElement("input",{id:name,className:classes,type:"text",value:field.value,"aria-invalid":isInvalid,"aria-labelledby":labelId,"aria-required":!0,onChange:onChange,onBlur:this.onBlur}))}}]),TextInput}();TextInput.propTypes={description:_propTypes2.default.string,field:_propTypes2.default.object.isRequired,label:_propTypes2.default.string.isRequired,name:_propTypes2.default.string.isRequired,onChange:_propTypes2.default.func},exports.default=TextInput},2805:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_classnames2=_interopRequireDefault(__webpack_require__(8));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConfirmationMessage=function(_PureComponent){function ConfirmationMessage(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConfirmationMessage),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ConfirmationMessage.__proto__||Object.getPrototypeOf(ConfirmationMessage)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ConfirmationMessage,_react.PureComponent),_createClass(ConfirmationMessage,[{key:"render",value:function(){var _props=this.props,success=_props.success,text=_props.text,alertClasses=(0,_classnames2.default)("alert",{success:success,error:!success});return _react2.default.createElement("section",{className:"modal-content"},_react2.default.createElement("div",{className:alertClasses,dangerouslySetInnerHTML:{__html:text}}))}}]),ConfirmationMessage}();ConfirmationMessage.propTypes={success:_propTypes2.default.bool.isRequired,text:_propTypes2.default.string.isRequired},exports.default=ConfirmationMessage},2806:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setContactFormField=function(field,value){return{type:_actionTypes.SET_CONTACT_FORM_FIELD,field:field,value:value}},exports.setContactFormRecaptchaLoaded=function(value){return{type:_actionTypes.SET_CONTACT_FORM_RECAPTCHA_LOADED,value:value}},exports.sendContactForm=sendContactForm,exports.resetContactForm=function(){return{type:_actionTypes.RESET_CONTACT_FORM}},exports.handleContactFormSuccess=handleContactFormSuccess,exports.handleContactFormFailure=handleContactFormFailure,exports.handleContactFormRecaptchaError=handleContactFormRecaptchaError,exports.handleContactFormRecaptchaReset=function(){return{type:_actionTypes.HANDLE_CONTACT_FORM_RECAPTCHA_RESET}},exports.submitContactForm=function(){return function(dispatch,getState){var state=getState(),viewId=state.view.id,fields=state.contactForm.fields;dispatch(sendContactForm()),fetch("/datasets/"+viewId+"/contact_dataset_owner",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":(0,_http.csrfToken)()},body:JSON.stringify({id:viewId,type:"other",subject:fields.subject.value,message:fields.message.value,from_address:fields.email.value,recaptcha_response_token:fields.recaptchaResponseToken})}).then(_http.checkStatus).then(function(response){return response.json()}).then(function(){dispatch(handleContactFormSuccess())}).catch(function(error){return error.response.json().then(function(response){"Invalid Recaptcha"===response.message?dispatch(handleContactFormRecaptchaError()):dispatch(handleContactFormFailure())})})}},__webpack_require__(42);var _http=__webpack_require__(25),_actionTypes=__webpack_require__(149);function sendContactForm(){return{type:_actionTypes.SEND_CONTACT_FORM}}function handleContactFormSuccess(){return{type:_actionTypes.HANDLE_CONTACT_FORM_SUCCESS}}function handleContactFormFailure(){return{type:_actionTypes.HANDLE_CONTACT_FORM_FAILURE}}function handleContactFormRecaptchaError(){return{type:_actionTypes.HANDLE_CONTACT_FORM_RECAPTCHA_ERROR}}},2807:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj};var loaded=!1;exports.default={init:function(element,callback){var recaptcha=document.createElement("div");recaptcha.id="recaptcha",element.innerHTML="",element.appendChild(recaptcha);var _init=setInterval(function(){if(!_lodash2.default.isUndefined(window.grecaptcha)){var id=window.grecaptcha.render("recaptcha",{sitekey:window.serverConfig.recaptchaKey,hl:window.serverConfig.locale});loaded=!0,_lodash2.default.isFunction(callback)&&callback(id),clearInterval(_init)}},100)},getResponseToken:function(id){if(loaded)return window.grecaptcha.getResponse(id)},reset:function(id){loaded&&window.grecaptcha.reset(id)}}},2808:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ContactForm=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_velocityAnimate2=_interopRequireDefault(__webpack_require__(334)),_recaptcha2=_interopRequireDefault(__webpack_require__(2807)),_classnames2=_interopRequireDefault(__webpack_require__(8)),_breakpoints2=_interopRequireDefault(__webpack_require__(947)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_reactRedux=__webpack_require__(4),_contactForm=__webpack_require__(2806),_ConfirmationMessage2=_interopRequireDefault(__webpack_require__(2805)),_TextInput2=_interopRequireDefault(__webpack_require__(2804)),_TextArea2=_interopRequireDefault(__webpack_require__(2803)),_constants=__webpack_require__(219);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var animationEasing=[.645,.045,.355,1],ContactForm=exports.ContactForm=function(_Component){function ContactForm(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ContactForm);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ContactForm.__proto__||Object.getPrototypeOf(ContactForm)).call(this,props));return _this.state={errors:[]},_lodash2.default.bindAll(_this,"onClickSend","onFieldChange","cleanUpAfterClose"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ContactForm,_react.Component),_createClass(ContactForm,[{key:"componentDidMount",value:function(){this.initializeRecaptcha()}},{key:"componentDidUpdate",value:function(){var _props=this.props,onRecaptchaReset=_props.onRecaptchaReset,resetRecaptcha=_props.resetRecaptcha,status=_props.status;resetRecaptcha&&(_recaptcha2.default.reset(this.recaptchaId),onRecaptchaReset()),(_lodash2.default.isEqual(status,"success")||_lodash2.default.isEqual(status,"failure"))&&this.closeModal()}},{key:"onClickSend",value:function(event){event.preventDefault();var onClickSend=this.props.onClickSend,errors=this.validateForm();if(_lodash2.default.some(errors)){var invalidField=_reactDom2.default.findDOMNode(this).querySelector('[aria-invalid="true"]');invalidField&&invalidField.focus(),this.setState({errors:errors})}else onClickSend()}},{key:"onFieldChange",value:function(event){var _event$target=event.target,id=_event$target.id,value=_event$target.value,isInvalid=_lodash2.default.isEmpty(value)||_lodash2.default.isEqual(id,"email")&&!_constants.VALID_EMAIL_REGEX.test(value);this.props.onChangeFormField(id,{value:value,invalid:isInvalid})}},{key:"initializeRecaptcha",value:function(){var onRecaptchaLoaded=this.props.onRecaptchaLoaded;_recaptcha2.default.init(this.recaptchaContainer,function(id){onRecaptchaLoaded(!0),this.recaptchaId=id}.bind(this))}},{key:"validateForm",value:function(){var _this2=this,fields=this.props.fields;return _lodash2.default.reduce(fields,function(result,field,id){return _lodash2.default.isEqual(id,"recaptchaResponseToken")&&_this2.isRecaptchaIncomplete()?result.push(I18n.contact_dataset_owner_modal.error_empty_recaptcha):field.invalid&&(!_lodash2.default.isEqual(id,"email")||_lodash2.default.isEmpty(field.value)?result.push(I18n.contact_dataset_owner_modal["error_empty_"+id]):_lodash2.default.isEqual(id,"email")&&result.push(I18n.contact_dataset_owner_modal.error_invalid_email)),result},[])}},{key:"isRecaptchaIncomplete",value:function(){var _props2=this.props,fields=_props2.fields,onChangeFormField=_props2.onChangeFormField,recaptchaResponseToken=fields.recaptchaResponseToken;if(!_lodash2.default.isEmpty(recaptchaResponseToken))return!1;var responseToken=_recaptcha2.default.getResponseToken(this.recaptchaId);return onChangeFormField("recaptchaResponseToken",responseToken),_lodash2.default.isEmpty(responseToken)}},{key:"cleanUpAfterClose",value:function(){var resetForm=this.props.resetForm,element=_reactDom2.default.findDOMNode(this);element.classList.add("modal-hidden"),document.body.classList.remove("modal-open");var container=element.querySelector(".modal-container");container.style.left="",container.style.display="",container.style.opacity="",resetForm(),this.setState({errors:[]}),this.initializeRecaptcha()}},{key:"closeModal",value:function(){var _this3=this,element=_reactDom2.default.findDOMNode(this).querySelector(".modal-container"),windowWidth=document.body.offsetWidth,isMobile=windowWidth<=_breakpoints2.default.mobile;_lodash2.default.delay(function(){isMobile?(0,_velocityAnimate2.default)(element,{left:windowWidth},{duration:300,easing:animationEasing,complete:_this3.cleanUpAfterClose}):(0,_velocityAnimate2.default)(element,"fadeOut",{duration:500,complete:_this3.cleanUpAfterClose})},1e3)}},{key:"renderContactForm",value:function(){var _this4=this,_props3=this.props,fields=_props3.fields,status=_props3.status,recaptchaPlaceholderSpinner=_props3.recaptchaLoaded?"":_react2.default.createElement("div",{"aria-label":I18n.contact_dataset_owner_modal.recaptcha_loading,className:"spinner-default"}),isSending=_lodash2.default.isEqual(status,"sending"),sendButtonClasses=(0,_classnames2.default)("btn btn-primary btn-sm",{sending:isSending}),sendButtonContent=isSending?_react2.default.createElement("span",{"aria-label":I18n.contact_dataset_owner_modal.sending,className:"spinner-default"}):I18n.contact_dataset_owner_modal.send;return _react2.default.createElement("div",{role:"dialog","aria-labelledby":"contact-owner-title"},_react2.default.createElement("header",{className:"modal-header"},_react2.default.createElement("h2",{id:"contact-owner-title",className:"h5 modal-header-title"},I18n.contact_dataset_owner_modal.title),_react2.default.createElement("button",{"aria-label":I18n.close,className:"btn btn-transparent modal-header-dismiss",onClick:this.cleanUpAfterClose,"data-modal-dismiss":!0},_react2.default.createElement("span",{className:"icon-close-2"}))),_react2.default.createElement("section",{className:"modal-content"},_react2.default.createElement("form",{id:"contact",onSubmit:this.onClickSend},_react2.default.createElement("p",{className:"small"},I18n.contact_dataset_owner_modal.description),_react2.default.createElement(_TextInput2.default,{field:fields.subject,label:I18n.contact_dataset_owner_modal.subject,name:"subject",onChange:this.onFieldChange}),_react2.default.createElement(_TextArea2.default,{field:fields.message,label:I18n.contact_dataset_owner_modal.message,name:"message",onChange:this.onFieldChange}),_react2.default.createElement(_TextInput2.default,{description:I18n.contact_dataset_owner_modal.email_description,field:fields.email,label:I18n.contact_dataset_owner_modal.email,name:"email",onChange:this.onFieldChange}),_react2.default.createElement("div",{className:"recaptcha-container","aria-label":I18n.contact_dataset_owner_modal.recaptcha},recaptchaPlaceholderSpinner,_react2.default.createElement("div",{ref:function(el){return _this4.recaptchaContainer=el}})))),this.renderErrorMessages(),_react2.default.createElement("footer",{className:"modal-actions"},_react2.default.createElement("button",{id:"contact-form-cancel",className:"btn btn-default btn-sm","data-modal-dismiss":!0,disabled:isSending,onClick:this.cleanUpAfterClose},I18n.cancel),_react2.default.createElement("button",{type:"submit",id:"contact-form-send",className:sendButtonClasses,disabled:isSending,onClick:this.onClickSend},sendButtonContent)))}},{key:"renderConfirmationMessage",value:function(){var success="success"===this.props.status,text=success?I18n.contact_dataset_owner_modal.success_html:I18n.contact_dataset_owner_modal.failure_html;return _react2.default.createElement(_ConfirmationMessage2.default,{success:success,text:text})}},{key:"renderErrorMessages",value:function(){var errors=this.state.errors;if(_lodash2.default.some(errors)){var messages=_lodash2.default.map(errors,function(error,i){return _react2.default.createElement("p",{key:i},error)});return _react2.default.createElement("section",{className:"modal-content"},_react2.default.createElement("div",{className:"alert error validation"},messages))}}},{key:"render",value:function(){var status=this.props.status,content=void 0;return content="success"===status||"failure"===status?this.renderConfirmationMessage():this.renderContactForm(),_react2.default.createElement("div",{id:"contact-form",className:"modal modal-overlay modal-hidden","data-modal-dismiss":!0},_react2.default.createElement("div",{className:"modal-container"},content))}}]),ContactForm}();ContactForm.propTypes={fields:_propTypes2.default.object.isRequired,onRecaptchaReset:_propTypes2.default.func,recaptchaLoaded:_propTypes2.default.bool.isRequired,resetForm:_propTypes2.default.func.isRequired,resetRecaptcha:_propTypes2.default.bool.isRequired,onClickSend:_propTypes2.default.func.isRequired,onChangeFormField:_propTypes2.default.func.isRequired,onRecaptchaLoaded:_propTypes2.default.func.isRequired,status:_propTypes2.default.string.isRequired},exports.default=(0,_reactRedux.connect)(function(state){return state.contactForm},function(dispatch){return{onChangeFormField:function(field,value){dispatch((0,_contactForm.setContactFormField)(field,value))},onRecaptchaLoaded:function(value){dispatch((0,_contactForm.setContactFormRecaptchaLoaded)(value))},onClickSend:function(){dispatch((0,_contactForm.submitContactForm)())},resetForm:function(){dispatch((0,_contactForm.resetContactForm)())},onRecaptchaReset:function(){dispatch((0,_contactForm.handleContactFormRecaptchaReset)())}}})(ContactForm)},2809:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(__webpack_require__(0)),_ContactForm2=_interopRequireDefault(__webpack_require__(2808)),_FeaturedContentModal2=_interopRequireDefault(__webpack_require__(2802)),_CartoModal2=_interopRequireDefault(__webpack_require__(2796)),_PlotlyModal2=_interopRequireDefault(__webpack_require__(2795));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){return _react2.default.createElement("div",null,_react2.default.createElement(_CartoModal2.default,null),_react2.default.createElement(_PlotlyModal2.default,null),_react2.default.createElement(_ContactForm2.default,null),_react2.default.createElement(_FeaturedContentModal2.default,null))}},2811:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SchemaPreview=void 0;_interopRequireDefault(__webpack_require__(0));var _reactRedux=__webpack_require__(4),_SchemaPreview2=_interopRequireDefault(__webpack_require__(938));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.SchemaPreview=_SchemaPreview2.default;exports.default=(0,_reactRedux.connect)(function(state){return{columns:state.view.columns}},function(){return{onExpandColumn:function(){},onExpandSchemaTable:function(){}}})(_SchemaPreview2.default)},2812:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SchemaDotOrgMarkup=exports.ItemProps=exports.Taxonomy=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4),_downloadLinks=__webpack_require__(943),_dates=__webpack_require__(85);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Taxonomy=exports.Taxonomy=Object.freeze({CREATIVE_WORK:"http://schema.org/CreativeWork",DATA_DOWNLOAD:"http://schema.org/DataDownload",DATASET:"http://schema.org/Dataset",ORGANIZATION:"http://schema.org/Organization"}),ItemProps=exports.ItemProps=Object.freeze({CONTENT_URL:"contentUrl",DATE_CREATED:"dateCreated",DATE_MODIFIED:"dateModified",DATE_PUBLISHED:"datePublished",DISTRIBUTION:"distribution",FILE_FORMAT:"fileFormat",KEYWORDS:"keywords",LICENSE:"license",NAME:"name",SAME_AS:"sameAs",URL:"url"}),SchemaDotOrgMarkup=exports.SchemaDotOrgMarkup=function(_Component){function SchemaDotOrgMarkup(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SchemaDotOrgMarkup),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SchemaDotOrgMarkup.__proto__||Object.getPrototypeOf(SchemaDotOrgMarkup)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SchemaDotOrgMarkup,_react.Component),_createClass(SchemaDotOrgMarkup,[{key:"renderItemProp",value:function(prop,content){return _react2.default.createElement("meta",{itemProp:prop,content:content})}},{key:"renderDownloadLink",value:function(format,viewUid,cname,key){var mimeType=(0,_downloadLinks.getMimeType)(format),downloadLink=(0,_downloadLinks.getDownloadLink)(viewUid,{format:format,cname:cname});return _react2.default.createElement("div",{key:key,itemScope:!0,itemProp:ItemProps.DISTRIBUTION,itemType:Taxonomy.DATA_DOWNLOAD},_react2.default.createElement("span",{itemProp:ItemProps.FILE_FORMAT,content:mimeType}),_react2.default.createElement("link",{itemProp:ItemProps.CONTENT_URL,content:downloadLink}))}},{key:"renderODNLink",value:function(){var _props=this.props,view=_props.view,ODNLink="https://www.opendatanetwork.com/dataset/"+_props.cname+"/"+view.id;return this.renderItemProp(ItemProps.SAME_AS,ODNLink)}},{key:"renderUrl",value:function(){var href=this.props.href;return this.renderItemProp(ItemProps.URL,href)}},{key:"renderPermalink",value:function(){var _props2=this.props,view=_props2.view,cname=_props2.cname,permalink=_props2.protocol+"//"+cname+"/d/"+view.id;return this.renderItemProp(ItemProps.SAME_AS,permalink)}},{key:"renderDistributions",value:function(){var _this2=this,_props3=this.props,view=_props3.view,cname=_props3.cname,viewUid=view.id,exportFormats=view.exportFormats;return _lodash2.default.map(_lodash2.default.compact(exportFormats),function(format,i){return _this2.renderDownloadLink(format,viewUid,cname,i)})}},{key:"renderLicense",value:function(){var coreView=this.props.view.coreView,license=_lodash2.default.get(coreView,"license");if(_lodash2.default.isEmpty(license))return null;var licenseName=license.name,licenseUrl=license.termsLink;return _lodash2.default.isEmpty(licenseName)?null:_react2.default.createElement("div",{itemScope:!0,itemProp:ItemProps.LICENSE,itemType:Taxonomy.CREATIVE_WORK},_react2.default.createElement("meta",{itemProp:ItemProps.NAME,content:licenseName}),_react2.default.createElement("meta",{itemProp:ItemProps.URL,content:licenseUrl}))}},{key:"renderTags",value:function(){var tags=this.props.view.tags;return _lodash2.default.map(_lodash2.default.compact(tags),function(tag,i){return _react2.default.createElement("meta",{key:i,itemProp:ItemProps.KEYWORDS,content:tag.toLowerCase()})})}},{key:"renderCategory",value:function(){var category=this.props.view.category;return _lodash2.default.isEmpty(category)?null:_react2.default.createElement("meta",{itemProp:ItemProps.KEYWORDS,content:category.toLowerCase()})}},{key:"renderCreationDates",value:function(){var coreView=this.props.view.coreView,createdAt=_lodash2.default.get(coreView,"createdAt");if(null==createdAt)return null;var formattedCreatedAt=(0,_dates.formatRawDateAsISO8601)(createdAt);return _react2.default.createElement("div",null,_react2.default.createElement("meta",{itemProp:ItemProps.DATE_CREATED,content:formattedCreatedAt}),_react2.default.createElement("meta",{itemProp:ItemProps.DATE_PUBLISHED,content:formattedCreatedAt}))}},{key:"renderModificationDate",value:function(){var coreView=this.props.view.coreView,updatedAt=_lodash2.default.get(coreView,"rowsUpdatedAt");return null==updatedAt?null:_react2.default.createElement("meta",{itemProp:ItemProps.DATE_MODIFIED,content:(0,_dates.formatRawDateAsISO8601)(updatedAt)})}},{key:"render",value:function(){return _react2.default.createElement("div",null,this.renderUrl(),this.renderPermalink(),this.renderDistributions(),this.renderLicense(),this.renderTags(),this.renderCategory(),this.renderCreationDates(),this.renderModificationDate(),this.renderODNLink())}}]),SchemaDotOrgMarkup}();SchemaDotOrgMarkup.propTypes={view:_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,category:_propTypes2.default.string,coreView:_propTypes2.default.shape({license:_propTypes2.default.shape({name:_propTypes2.default.string,termsLink:_propTypes2.default.string}),createdAt:_propTypes2.default.number}),exportFormats:_propTypes2.default.arrayOf(_propTypes2.default.string),gridUrl:_propTypes2.default.string,tags:_propTypes2.default.arrayOf(_propTypes2.default.string)}).isRequired,cname:_propTypes2.default.string.isRequired,protocol:_propTypes2.default.string.isRequired,href:_propTypes2.default.string.isRequired},exports.default=(0,_reactRedux.connect)(function(_ref){return{view:_ref.view,cname:window.location.hostname,protocol:window.location.protocol,href:window.location.href}})(SchemaDotOrgMarkup)},2813:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=RowDetails;var _lodash2=_interopRequireDefault(__webpack_require__(2)),_js_utils2=_interopRequireDefault(__webpack_require__(18)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RowDetails(_ref){var rowCount=_ref.rowCount,columnCount=_ref.columnCount,rowLabel=_ref.rowLabel;return _react2.default.createElement("section",{className:"landing-page-section dataset-contents"},_react2.default.createElement("h2",{className:"landing-page-section-header"},I18n.common.dataset_contents.title),_react2.default.createElement("div",{className:"section-content"},_lodash2.default.isUndefined(rowCount)?_react2.default.createElement("div",{className:"metadata-section busy"},_react2.default.createElement("span",{className:"spinner-default"})):_react2.default.createElement("div",{className:"metadata-section"},_react2.default.createElement("dl",{className:"metadata-row"},_lodash2.default.isNumber(rowCount)?_react2.default.createElement("div",{className:"metadata-pair"},_react2.default.createElement("dt",{className:"metadata-pair-key"},I18n.common.dataset_contents.rows),_react2.default.createElement("dd",{className:"metadata-pair-value"},_js_utils2.default.formatNumber(rowCount))):null,!_lodash2.default.isNumber(columnCount)||columnCount<=0?null:_react2.default.createElement("div",{className:"metadata-pair"},_react2.default.createElement("dt",{className:"metadata-pair-key"},I18n.common.dataset_contents.columns),_react2.default.createElement("dd",{className:"metadata-pair-value"},_js_utils2.default.formatNumber(columnCount))),rowLabel&&rowLabel.toLowerCase()!==I18n.common.default_row_label?_react2.default.createElement("div",{className:"metadata-pair"},_react2.default.createElement("dt",{className:"metadata-pair-key"},I18n.common.dataset_contents.row_display_unit),_react2.default.createElement("dd",{itemProp:"variableMeasured",className:"metadata-pair-value"},rowLabel)):null))))}RowDetails.propTypes={rowCount:_propTypes2.default.number,columnCount:_propTypes2.default.number.isRequired,rowLabel:_propTypes2.default.string.isRequired}},2814:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reactRedux=__webpack_require__(4),_RowDetails=__webpack_require__(2813),_RowDetails2=(obj=_RowDetails)&&obj.__esModule?obj:{default:obj};exports.default=(0,_reactRedux.connect)(function(state){return{rowLabel:state.view.rowLabel,columnCount:state.view.columns.length,rowCount:state.view.rowCount}})(_RowDetails2.default)},2815:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleRelatedViews=function(){return{type:_actionTypes.TOGGLE_RELATED_VIEWS}},exports.requestRelatedViews=requestRelatedViews,exports.receiveRelatedViews=receiveRelatedViews,exports.handleRelatedViewsError=handleRelatedViewsError,exports.dismissRelatedViewsError=function(){return{type:_actionTypes.DISMISS_RELATED_VIEWS_ERROR}},exports.loadMoreRelatedViews=function(){return function(dispatch,getState){var state=getState();if(!_.get(state,"relatedViews.isLoading",!1)){var uid=state.view.id,offset=_.get(state,"relatedViews.viewList.length",0),limit=_constants.RELATED_VIEWS_FETCH_LIMIT+1,fetchUrl="/dataset_landing_page/"+uid+"/related_views?limit="+limit+"&offset="+offset,fetchOptions={credentials:"same-origin",headers:_http.defaultHeaders};dispatch(requestRelatedViews()),fetch(fetchUrl,fetchOptions).then(_http.checkStatus).then(function(response){return response.json()}).then(function(relatedViews){return dispatch(receiveRelatedViews(relatedViews))}).catch(function(){return dispatch(handleRelatedViewsError())})}}},__webpack_require__(42);var _http=__webpack_require__(25),_constants=__webpack_require__(628),_actionTypes=__webpack_require__(149);function requestRelatedViews(){return{type:_actionTypes.REQUEST_RELATED_VIEWS}}function receiveRelatedViews(relatedViews){return{type:_actionTypes.RECEIVE_RELATED_VIEWS,relatedViews:relatedViews}}function handleRelatedViewsError(){return{type:_actionTypes.HANDLE_RELATED_VIEWS_ERROR}}},2816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RelatedViewList=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactTransitionGroup=__webpack_require__(499),_reactRedux=__webpack_require__(4),_BootstrapAlert2=_interopRequireDefault(__webpack_require__(939)),_components=__webpack_require__(9),_viewCardHelpers=__webpack_require__(231),_constants=__webpack_require__(628),_a11yHelpers=__webpack_require__(371),_user=__webpack_require__(151),Rights=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(370)),_relatedViews=__webpack_require__(2815);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RelatedViewList=exports.RelatedViewList=function(_Component){function RelatedViewList(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RelatedViewList);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(RelatedViewList.__proto__||Object.getPrototypeOf(RelatedViewList)).call(this,props));return _lodash2.default.bindAll(_this,["onScrollList","getHeight","renderEmptyListAlert","renderContents","renderLoadMoreLink","renderError","renderCollapseLink"]),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(RelatedViewList,_react.Component),_createClass(RelatedViewList,[{key:"onScrollList",value:function(event){var _props=this.props,isDesktop=_props.isDesktop,hasMore=_props.hasMore,isLoading=_props.isLoading,loadMore=_props.loadMore;if(!isDesktop&&hasMore&&!isLoading){var el=event.target;el.scrollWidth-el.offsetWidth-el.scrollLeft<200&&loadMore()}}},{key:"getHeight",value:function(){var _props2=this.props,viewList=_props2.viewList,isCollapsed=_props2.isCollapsed,isDesktop=_props2.isDesktop,isLoading=_props2.isLoading;if(!_lodash2.default.isEmpty(viewList)){if(!isDesktop)return{height:"100%"};var visibleCount=isCollapsed?_constants.RELATED_VIEWS_FETCH_LIMIT:viewList.length,rowCount=Math.ceil(visibleCount/_constants.RELATED_VIEWS_FETCH_LIMIT);return isLoading&&(rowCount+=1),315*rowCount-1}}},{key:"renderEmptyListAlert",value:function(){var bootstrapUrl=this.props.bootstrapUrl;return _react2.default.createElement(_BootstrapAlert2.default,{bootstrapUrl:bootstrapUrl})}},{key:"renderContents",value:function(){var _props3=this.props,viewList=_props3.viewList,hasMore=_props3.hasMore,onClickWidget=_props3.onClickWidget,isDesktop=_props3.isDesktop,isLoading=_props3.isLoading;if((0,_user.userHasRight)(Rights.edit_others_datasets)&&_lodash2.default.isEmpty(viewList))return this.renderEmptyListAlert();var relatedViews=_lodash2.default.map(viewList,function(relatedView,i){return _react2.default.createElement(_components.ViewCard,_extends({key:i},(0,_viewCardHelpers.getViewCardPropsForView)(relatedView),{onClick:onClickWidget}))});!isDesktop&&hasMore&&relatedViews.push(_react2.default.createElement("div",{className:"result-card loading-card",key:"loading"},_react2.default.createElement("span",{className:"spinner-default spinner-large"}))),isDesktop&&hasMore&&isLoading&&relatedViews.push(_react2.default.createElement("div",{className:"desktop-spinner",key:"loading"},_react2.default.createElement("span",{className:"spinner-default spinner-large"})));var style={height:this.getHeight()};return _react2.default.createElement(_reactTransitionGroup.CSSTransitionGroup,{component:"div",className:"media-results related-views",style:style,onScroll:this.onScrollList,transitionName:"related-views",transitionEnterTimeout:400,transitionLeaveTimeout:400},relatedViews)}},{key:"renderLoadMoreLink",value:function(){var _props4=this.props,hasMore=_props4.hasMore,isLoading=_props4.isLoading,loadMore=_props4.loadMore,isDesktop=_props4.isDesktop;if(!hasMore||!isDesktop)return null;var clickHandler=isLoading?null:loadMore;return _react2.default.createElement("a",{role:"button",tabIndex:"0",onClick:clickHandler,onKeyDown:(0,_a11yHelpers.handleKeyPress)(clickHandler),className:"load-more-button"},I18n.more)}},{key:"renderError",value:function(){var _props5=this.props,hasError=_props5.hasError,dismissError=_props5.dismissError;return hasError?_react2.default.createElement("div",{className:"alert error"},I18n.related_views.load_more_error,_react2.default.createElement("span",{role:"button",className:"icon-close-2 alert-dismiss",onClick:dismissError})):null}},{key:"renderCollapseLink",value:function(){var _props6=this.props,viewList=_props6.viewList,hasMore=_props6.hasMore,isCollapsed=_props6.isCollapsed,toggleList=_props6.toggleList,isDesktop=_props6.isDesktop;return hasMore||viewList.length<=_constants.RELATED_VIEWS_FETCH_LIMIT||!isDesktop?null:_react2.default.createElement("a",{role:"button",tabIndex:"0",onClick:toggleList,onKeyDown:(0,_a11yHelpers.handleKeyPress)(toggleList),className:"collapse-button"},isCollapsed?I18n.more:I18n.less)}},{key:"render",value:function(){var viewList=this.props.viewList;return _lodash2.default.isEmpty(viewList)&&!(0,_user.userHasRight)(Rights.edit_others_datasets)?null:_react2.default.createElement("section",{className:"landing-page-section related-views"},_react2.default.createElement("h2",{className:"dataset-landing-page-header"},I18n.related_views.title),this.renderContents(),this.renderLoadMoreLink(),this.renderCollapseLink(),this.renderError())}}]),RelatedViewList}();RelatedViewList.propTypes={bootstrapUrl:_propTypes2.default.string,dismissError:_propTypes2.default.func.isRequired,hasError:_propTypes2.default.bool.isRequired,hasMore:_propTypes2.default.bool.isRequired,isCollapsed:_propTypes2.default.bool.isRequired,isDesktop:_propTypes2.default.bool.isRequired,isLoading:_propTypes2.default.bool.isRequired,loadMore:_propTypes2.default.func.isRequired,onClickWidget:_propTypes2.default.func.isRequired,toggleList:_propTypes2.default.func.isRequired,viewList:_propTypes2.default.arrayOf(_propTypes2.default.object).isRequired},exports.default=(0,_reactRedux.connect)(function(state){return _extends({bootstrapUrl:state.view.bootstrapUrl},state.relatedViews)},function(dispatch){return{loadMore:function(){dispatch((0,_relatedViews.loadMoreRelatedViews)())},toggleList:function(){dispatch((0,_relatedViews.toggleRelatedViews)())},dismissError:function(){dispatch((0,_relatedViews.dismissRelatedViewsError)())},onClickWidget:function(event){$(event.target).closest(".result-card")[0]}}})(RelatedViewList)},2817:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PublishNotice=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(18);var _lodash2=_interopRequireDefault(__webpack_require__(2)),_classnames2=_interopRequireDefault(__webpack_require__(8)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_redux=__webpack_require__(14),_reactRedux=__webpack_require__(4),_a11yHelpers=__webpack_require__(371),_user=__webpack_require__(151),Rights=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(370)),_view=__webpack_require__(307),_locale=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PublishNotice=exports.PublishNotice=function(_Component){function PublishNotice(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PublishNotice),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PublishNotice.__proto__||Object.getPrototypeOf(PublishNotice)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PublishNotice,_react.Component),_createClass(PublishNotice,[{key:"renderPublishErrorAlert",value:function(){var _props=this.props,view=_props.view,onDismissError=_props.onDismissError;return view.hasPublishingError?_react2.default.createElement("div",{className:"alert error alert-full-width-top publish-error"},_react2.default.createElement("div",{className:"alert-container"},_react2.default.createElement("span",{className:"icon-close-2 alert-dismiss",role:"alert",tabIndex:"0","aria-label":"dismiss",onKeyDown:(0,_a11yHelpers.handleKeyPress)(onDismissError,!0),onClick:onDismissError}),_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.publish_error}}))):null}},{key:"renderPublishAlert",value:function(){var _props2=this.props,view=_props2.view,onClickPublish=_props2.onClickPublish,message=I18n.publish_notice.format({url:(0,_locale.localizeLink)(view.gridUrl)}),flyout=null,buttonContents=I18n.publish,buttonProps={className:(0,_classnames2.default)("btn btn-primary btn-sm"),onClick:onClickPublish,"data-flyout":null};view.canPublish?view.hasPublishingSuccess?(buttonProps.className=(0,_classnames2.default)(buttonProps.className,"btn-success"),buttonContents=I18n.published+"!"):view.isPublishing&&(buttonProps.className=(0,_classnames2.default)(buttonProps.className,"btn-busy"),buttonProps.onClick=null,buttonContents=_react2.default.createElement("div",{className:"spinner-default spinner-btn-primary"})):(buttonProps.className=(0,_classnames2.default)(buttonProps.className,"btn-disabled"),buttonProps.onClick=null,buttonProps["data-flyout"]="publish-flyout",flyout=_react2.default.createElement("div",{id:"publish-flyout",className:"flyout flyout-hidden"},_react2.default.createElement("section",{className:"flyout-content"},_react2.default.createElement("p",null,I18n.publish_geocoding_message)),_react2.default.createElement("footer",{className:"flyout-footer"})));var button=(0,_user.userHasRight)(Rights.edit_others_datasets)?_react2.default.createElement("button",buttonProps,buttonContents):null;return _react2.default.createElement("div",{className:"alert warning alert-full-width-top publish-notice"},_react2.default.createElement("div",{className:"alert-container"},_react2.default.createElement("span",{className:"message",dangerouslySetInnerHTML:{__html:message}}),button,flyout))}},{key:"render",value:function(){return this.props.view.isUnpublished?_react2.default.createElement("div",null,this.renderPublishAlert(),this.renderPublishErrorAlert()):null}}]),PublishNotice}();PublishNotice.propTypes={onClickPublish:_propTypes2.default.func,onDismissError:_propTypes2.default.func,view:_propTypes2.default.object.isRequired},exports.default=(0,_reactRedux.connect)(function(state){return _lodash2.default.pick(state,"view")},function(dispatch){return(0,_redux.bindActionCreators)({onClickPublish:_view.publishView,onDismissError:_view.clearViewPublishError},dispatch)})(PublishNotice)},2818:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrivateNotice=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4),_accessManager=__webpack_require__(941),_user=__webpack_require__(151),Rights=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(370)),_locale=__webpack_require__(27),_Notice2=_interopRequireDefault(__webpack_require__(946));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PrivateNotice=exports.PrivateNotice=function(_Component){function PrivateNotice(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PrivateNotice);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PrivateNotice.__proto__||Object.getPrototypeOf(PrivateNotice)).call(this,props));return _this.state={isHidden:!0},_lodash2.default.bindAll(_this,"onClickDismiss"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PrivateNotice,_react.Component),_createClass(PrivateNotice,[{key:"componentWillMount",value:function(){var hasDismissedPrivateNotice=!0;try{hasDismissedPrivateNotice=JSON.parse(window.sessionStorage.getItem("dismissedPrivateNotices"))[this.props.view.id]}catch(e){hasDismissedPrivateNotice=!1}this.setState({isHidden:hasDismissedPrivateNotice})}},{key:"onClickDismiss",value:function(){try{var privateNoticesClosed=JSON.parse(window.sessionStorage.getItem("dismissedPrivateNotices"));(privateNoticesClosed=privateNoticesClosed||{})[this.props.view.id]=!0,window.sessionStorage.setItem("dismissedPrivateNotices",JSON.stringify(privateNoticesClosed))}finally{this.setState({isHidden:!0})}}},{key:"render",value:function(){var view=this.props.view;if(this.state.isHidden||!view.isPrivate)return null;var manageLink=(0,_user.userHasRight)(Rights.edit_others_datasets)?_react2.default.createElement("a",{href:(0,_locale.localizeLink)(view.gridUrl)+"?pane=manage",onClick:function(e){return(0,_accessManager.showAccessManager)(e)}},I18n.manage_prompt):null;return _react2.default.createElement(_Notice2.default,{onClickDismiss:this.onClickDismiss},I18n.private_notice," ",manageLink)}}]),PrivateNotice}();PrivateNotice.propTypes={view:_propTypes2.default.object.isRequired,onAlertSavedNoticeClose:_propTypes2.default.func},exports.default=(0,_reactRedux.connect)(function(state){return _lodash2.default.pick(state,"view")})(PrivateNotice)},2819:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WatchDatasetButton=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_classnames2=_interopRequireDefault(__webpack_require__(8)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4),_subscriptionStore2=_interopRequireDefault(__webpack_require__(940)),_view=__webpack_require__(307);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var WatchDatasetButton=exports.WatchDatasetButton=function(_Component){function WatchDatasetButton(){var _ref,_temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WatchDatasetButton);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=WatchDatasetButton.__proto__||Object.getPrototypeOf(WatchDatasetButton)).call.apply(_ref,[this].concat(args))),_this.onWatchDatasetButtonClick=function(event){event.preventDefault();var _this$props=_this.props,view=_this$props.view,onSubscriptionChange=_this$props.onSubscriptionChange;(view.subscribed?_subscriptionStore2.default.unsubscribe(view.subscriptionId):_subscriptionStore2.default.subscribe(view.id)).then(function(subscribedResult){onSubscriptionChange(_lodash2.default.get(subscribedResult,"id",null))}).catch(function(){return onSubscriptionChange(null)})},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(WatchDatasetButton,_react.Component),_createClass(WatchDatasetButton,[{key:"render",value:function(){var _this2=this,subscribed=this.props.view.subscribed,watchDatasetFlagIcon=(0,_classnames2.default)("flag-icon",subscribed?"socrata-icon-watched":"socrata-icon-watch"),type=this.props.useDataAssetStrings?"data_asset":"dataset",key=subscribed?"unwatch_"+type:"watch_"+type;return _react2.default.createElement("div",{className:"watch-dataset-button"},_react2.default.createElement("label",{onClick:function(event){return _this2.onWatchDatasetButtonClick(event)},className:"inline-label manage-prompt-button btn btn-sm btn-default","data-flyout":"watch-dataset-button-flyout",htmlFor:"show-dimension-labels"},_react2.default.createElement("span",{className:watchDatasetFlagIcon}),_react2.default.createElement("span",{className:"checkbox-with-icon-label"},I18n.action_buttons[key])),_react2.default.createElement("div",{id:"watch-dataset-button-flyout",className:"flyout flyout-hidden flyout-block-label"},_react2.default.createElement("section",{className:"flyout-content"},I18n.action_buttons.watch_dataset_flyout)))}}]),WatchDatasetButton}();WatchDatasetButton.propTypes={onSubscriptionChange:_propTypes2.default.func,useDataAssetStrings:_propTypes2.default.bool,view:_propTypes2.default.object.isRequired},exports.default=(0,_reactRedux.connect)(null,function(dispatch){return{onSubscriptionChange:function(subscriptionId){dispatch((0,_view.onSubscriptionChange)(subscriptionId))}}})(WatchDatasetButton)},2820:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.associateChildToParent=function(parentUid,childView){return function(dispatch){return dispatch(apiCallStarted()),(0,_associateCollections.getView)(parentUid).then(function(parentView){var childAccessPoint=(0,_associateCollections.accessPointFor)(childView,!1);if(!(0,_associateCollections.parentHasAccessPoint)(parentView,childAccessPoint)){var newParentMetadata=(0,_associateCollections.mergeNewAccessPoint)(parentView,childAccessPoint);(0,_associateCollections.putMetadata)(parentUid,newParentMetadata).catch(function(){dispatch(apiCallFailed())})}var oldParentUid=(0,_associateCollections.getParentUid)(childView);if(oldParentUid!==parentUid){oldParentUid&&(0,_associateCollections.removeChildFromParent)(oldParentUid,childView.id);var newMetadata=_extends({},childView.metadata,{collectionParent:parentUid});return(0,_associateCollections.putMetadata)(childView.id,newMetadata).then(function(){dispatch(apiCallSucceeded())}).then(function(){location.reload()})}dispatch(apiCallSucceeded())}).catch(function(){dispatch(apiCallFailed())})}};var _associateCollections=__webpack_require__(707),apiCallStarted=function(){return{type:"API_CALL_STARTED",status:"STATUS_CALL_IN_PROGRESS"}},apiCallSucceeded=function(){return{type:"API_CALL_SUCCEEDED",status:"STATUS_CALL_SUCCEEDED",succeededAt:new Date}},apiCallFailed=function(){return{type:"API_CALL_FAILED",status:"STATUS_CALL_FAILED"}}},2821:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetadataTable=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.mapStateToProps=mapStateToProps;var _lodash2=_interopRequireDefault(__webpack_require__(2)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactRedux=__webpack_require__(4),_view=__webpack_require__(307),_associateCollections=__webpack_require__(2820),_components=__webpack_require__(9),_locale=__webpack_require__(27),_WatchDatasetButton2=_interopRequireDefault(__webpack_require__(2819)),_feature_flags=__webpack_require__(17),_user=__webpack_require__(151);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.MetadataTable=_components.MetadataTable;var isUSAID=function(){return!0===_feature_flags.FeatureFlags.value("usaid_features_enabled")};function mapStateToProps(state){var view=state.view||{},coreView=view.coreView,customFieldsets=view.customMetadataFieldsets||[],userNotificationsEnabled=!0===_feature_flags.FeatureFlags.value("enable_user_notifications"),enableCreateAlertButtonForAllUser=!0===_feature_flags.FeatureFlags.value("enable_alert_notifications_for_all_users"),enableCreateAlertButtonForAdmin=!0===_feature_flags.FeatureFlags.value("enable_alert_notifications_for_admin_users"),enableCreateAlertButtonForRolledUser=!0===_feature_flags.FeatureFlags.value("enable_alert_notifications_for_role_users"),customMetadataFieldsets=customFieldsets.reduce(function(acc,fieldset){var obj,key,value,currentAvailableFields=fieldset.fields.map(function(field){return field.name}),customFields=_lodash2.default.pickBy(fieldset.existing_fields,function(v,k){return currentAvailableFields.includes(k)});return _extends({},acc,(obj={},key=fieldset.name,value=_lodash2.default.map(fieldset.fields,function(_ref){var name=_ref.name;return{name:name,value:customFields[name]}}),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj))},{}),useDataAssetStrings=function(){var isParent=(view.coreView.metadata||{}).isParent;return isUSAID()&&!0===isParent},showCreateAlertButton=!1;(0,_user.isLoggedIn)()&&(enableCreateAlertButtonForAllUser?showCreateAlertButton=!0:enableCreateAlertButtonForAdmin&&((0,_user.isUserSuperadmin)()||(0,_user.isUserAdmin)())?showCreateAlertButton=!0:enableCreateAlertButtonForRolledUser&&(0,_user.isUserRoled)()&&(showCreateAlertButton=!0));var coreViewCopy=_lodash2.default.cloneDeep(coreView),license=_lodash2.default.get(coreViewCopy,"license",{});return license.name=view.licenseName||license.name||"",coreViewCopy.license=license,{associatedAssetsApiCalls:state.associateCollections,enableAssociatedAssets:function(){if(view.editMetadataUrl){var publicationStage=view.coreView.publicationStage,isParent=(view.coreView.metadata||{}).isParent;if(!isUSAID())return!1;if("published"!==publicationStage)return!1;if(!1===isParent)return!0}return!1}(),localizeLink:_locale.localizeLink,coreView:coreViewCopy,customMetadataFieldsets:customMetadataFieldsets,disableContactDatasetOwner:view.disableContactDatasetOwner,statsUrl:view.statsUrl,renderWatchDatasetButton:function(){return""!==_lodash2.default.get(window,"sessionData.email","")&&userNotificationsEnabled?_react2.default.createElement(_WatchDatasetButton2.default,{view:view,useDataAssetStrings:useDataAssetStrings()}):null},showCreateAlertButton:showCreateAlertButton,useDataAssetStrings:useDataAssetStrings()}}exports.default=(0,_reactRedux.connect)(mapStateToProps,null,function(stateProps,_ref4){var dispatch=_ref4.dispatch;return _extends({},stateProps,{onClickStats:function(){},onExpandTags:function(){},onExpandMetadataTable:function(){},onSaveAssociatedAssets:function(associatedAssets){var associatedAssetId=_lodash2.default.get(associatedAssets[0],"id");associatedAssetId&&dispatch((0,_associateCollections.associateChildToParent)(associatedAssetId,stateProps.coreView))},onAlertSaveSuccess:function(){dispatch((0,_view.handleAlertSaveSuccess)())}})})(_components.MetadataTable)},2822:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_ResourceToggle2=_interopRequireDefault(__webpack_require__(942));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ODataModal=function(_PureComponent){function ODataModal(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ODataModal),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ODataModal.__proto__||Object.getPrototypeOf(ODataModal)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ODataModal,_react.PureComponent),_createClass(ODataModal,[{key:"getResourceTypes",value:function(){var view=this.props.view;return[{label:"OData V2",url:view.odataUrl},{label:"OData V4",url:view.odataUrlV4,defaultType:!0}]}},{key:"render",value:function(){var onClickCopy=this.props.onClickCopy,toggleProps={types:this.getResourceTypes(),section:"odata",title:I18n.odata_modal.endpoint_title,onClickCopy:onClickCopy};return _react2.default.createElement("div",{id:"odata-modal",className:"modal modal-overlay modal-hidden","data-modal-dismiss":!0},_react2.default.createElement("div",{className:"modal-container"},_react2.default.createElement("header",{className:"modal-header"},_react2.default.createElement("h2",{className:"h2 modal-header-title"},I18n.odata_modal.title),_react2.default.createElement("button",{"aria-label":I18n.close,className:"btn btn-transparent modal-header-dismiss","data-modal-dismiss":!0},_react2.default.createElement("span",{className:"icon-close-2"}))),_react2.default.createElement("section",{className:"modal-content odata-description"},_react2.default.createElement("p",{className:"small"},I18n.odata_modal.description),_react2.default.createElement("p",{className:"small tableau"},I18n.odata_modal.description_tableau)),_react2.default.createElement("section",{className:"modal-content"},_react2.default.createElement("a",{className:"btn btn-default btn-sm documentation-link",href:"https://support.socrata.com/hc/en-us/articles/115005364207",target:"_blank"},_react2.default.createElement("span",{className:"icon-copy-document"}),I18n.odata_modal.developer_portal_button)),_react2.default.createElement(_ResourceToggle2.default,toggleProps),_react2.default.createElement("footer",{className:"modal-actions"},_react2.default.createElement("button",{className:"btn btn-default btn-sm","data-modal-dismiss":!0},I18n.done))))}}]),ODataModal}();ODataModal.propTypes={onClickCopy:_propTypes2.default.func.isRequired,view:_propTypes2.default.object.isRequired},exports.default=ODataModal},2823:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_user=__webpack_require__(151),Rights=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(370)),_accessManager=__webpack_require__(941),_locale=__webpack_require__(27),_Flannel=__webpack_require__(274);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ShareFlannel=function(_PureComponent){function ShareFlannel(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ShareFlannel);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ShareFlannel.__proto__||Object.getPrototypeOf(ShareFlannel)).call(this,props));return _this.state={flannelOpen:props.flannelOpen},_lodash2.default.bindAll(_this,["closeFlannel","openFlannel","onClickOption"]),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ShareFlannel,_react.PureComponent),_createClass(ShareFlannel,[{key:"closeFlannel",value:function(){var onCloseShareFlannel=this.props.onCloseShareFlannel;this.setState({flannelOpen:!1}),onCloseShareFlannel()}},{key:"openFlannel",value:function(){this.setState({flannelOpen:!0})}},{key:"renderPrivateNotice",value:function(){var _this2=this,view=this.props.view;if(view.isPrivate){var manageLink=(0,_user.userHasRight)(Rights.edit_others_datasets)?_react2.default.createElement("a",{href:(0,_locale.localizeLink)(view.gridUrl)+"?pane=manage",onClick:function(e){return(0,_accessManager.showAccessManager)(e,_this2.closeFlannel)}},I18n.manage_prompt):null;return _react2.default.createElement("section",null,_react2.default.createElement("div",{className:"alert info"},_react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.share.visibility_alert_html}})," ",manageLink))}return null}},{key:"onClickOption",value:function(event){(0,this.props.onClickShareOption)(event.currentTarget.dataset.shareOption)}},{key:"renderFlannel",value:function(){var _props=this.props,view=_props.view,flannelTargetElement=_props.flannelTargetElement,flannelProps={id:"share-flannel",className:"share-flannel",title:I18n.share.title.replace("%{dataset_title}",view.name),target:flannelTargetElement,onDismiss:this.closeFlannel},flyoutHeaderProps={title:I18n.share.title.replace("%{dataset_title}",view.name),onDismiss:this.closeFlannel};return _react2.default.createElement(_Flannel.Flannel,flannelProps,_react2.default.createElement(_Flannel.FlannelHeader,flyoutHeaderProps),_react2.default.createElement(_Flannel.FlannelContent,null,_react2.default.createElement("div",null,I18n.share.description.replace("%{dataset_title}",view.name)),this.renderPrivateNotice(),_react2.default.createElement("div",{className:"section"},_react2.default.createElement("div",{className:"facebook"},_react2.default.createElement("a",{href:view.facebookShareUrl,"data-share-option":"Facebook",target:"_blank",onClick:this.onClickOption},_react2.default.createElement("span",{className:"icon-facebook"}),I18n.share.facebook)),_react2.default.createElement("div",{className:"twitter"},_react2.default.createElement("a",{href:view.twitterShareUrl,"data-share-option":"Twitter",target:"_blank",onClick:this.onClickOption},_react2.default.createElement("span",{className:"icon-twitter"}),I18n.share.twitter)),_react2.default.createElement("div",{className:"email"},_react2.default.createElement("a",{href:view.emailShareUrl,"data-share-option":"Email",onClick:this.onClickOption},_react2.default.createElement("span",{className:"icon-email"}),I18n.share.email)))))}},{key:"render",value:function(){return _react2.default.createElement("span",{className:"share-flannelsss"},this.state.flannelOpen&&this.renderFlannel())}}]),ShareFlannel}();exports.default=ShareFlannel,ShareFlannel.defaultProps={flannelOpen:!1},ShareFlannel.propTypes={onClickShareOption:_propTypes2.default.func.isRequired,view:_propTypes2.default.object.isRequired,flannelOpen:_propTypes2.default.bool,onCloseShareFlannel:_propTypes2.default.func}},2832:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isCopyingSupported=void 0,exports.initClipboardControl=function(selector){new _clipboard2.default(selector,{text:function(trigger){return $(trigger).closest("form").find("input").val()}}).on("success",function(event){var $button=$(event.trigger),copyText=$button.text();$button.addClass("btn-success").text($button.data("confirmation")),window.setTimeout(function(){$button.removeClass("btn-success").text(copyText)},2e3)})};var obj,_clipboard=__webpack_require__(2831),_clipboard2=(obj=_clipboard)&&obj.__esModule?obj:{default:obj};exports.isCopyingSupported=document.queryCommandSupported&&document.queryCommandSupported("copy")},2833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_clipboardControl=__webpack_require__(2832);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CopyButton=function(_PureComponent){function CopyButton(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CopyButton),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CopyButton.__proto__||Object.getPrototypeOf(CopyButton)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CopyButton,_react.PureComponent),_createClass(CopyButton,[{key:"componentDidMount",value:function(){_clipboardControl.isCopyingSupported&&(0,_clipboardControl.initClipboardControl)(this.copyButtonRef)}},{key:"render",value:function(){var _this2=this,_props=this.props,section=_props.section,onClickCopy=_props.onClickCopy;if(!_clipboardControl.isCopyingSupported)return null;var buttonProps={type:"button",className:"btn btn-primary btn-sm copy","data-confirmation":I18n.copy_success,ref:function(_ref){return _this2.copyButtonRef=_ref},onClick:function(){return onClickCopy(section)}};return _react2.default.createElement("span",{className:"input-group-btn"},_react2.default.createElement("button",buttonProps,I18n.copy))}}]),CopyButton}();CopyButton.propTypes={onClickCopy:_propTypes2.default.func.isRequired,section:_propTypes2.default.string},exports.default=CopyButton},2834:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_feature_flags=__webpack_require__(17),_Flannel=__webpack_require__(274),_ResourceToggle2=_interopRequireDefault(__webpack_require__(942));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ApiFlannel=function(_Component){function ApiFlannel(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ApiFlannel);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ApiFlannel.__proto__||Object.getPrototypeOf(ApiFlannel)).call(this,props));return _this.state={flannelOpen:props.flannelOpen},_lodash2.default.bindAll(_this,["closeFlannel","openFlannel"]),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ApiFlannel,_react.Component),_createClass(ApiFlannel,[{key:"getResourceTypes",value:function(){var view=this.props.view,resourceTypes=[];return resourceTypes.push({label:I18n.api_modal.json,url:view.resourceUrl,defaultType:_lodash2.default.isEmpty(view.namedResourceUrl)}),_lodash2.default.isEmpty(view.namedResourceUrl)||resourceTypes.push({label:I18n.api_modal.name,url:view.namedResourceUrl,defaultType:!0}),view.geoJsonResourceUrl&&resourceTypes.push({label:I18n.api_modal.geojson,url:view.geoJsonResourceUrl}),resourceTypes.push({label:I18n.api_modal.csv,url:view.csvResourceUrl}),resourceTypes}},{key:"closeFlannel",value:function(){this.setState({flannelOpen:!1})}},{key:"openFlannel",value:function(){this.setState({flannelOpen:!0})}},{key:"shouldRender",value:function(){var view=this.props.view;return!(view.isBlobby||view.isHref)}},{key:"renderFoundryLinks",value:function(){var view=this.props.view;return _feature_flags.FeatureFlags.value("enable_dataset_landing_page_foundry_links")?_react2.default.createElement("div",{className:"section"},_react2.default.createElement("a",{className:"btn btn-default btn-sm documentation-link",href:view.apiFoundryUrl,target:"_blank"},_react2.default.createElement("span",{className:"icon-copy-document"}),I18n.api_modal.foundry_button),_react2.default.createElement("a",{className:"btn btn-default btn-sm documentation-link",href:"https://dev.socrata.com",target:"_blank"},_react2.default.createElement("span",{className:"icon-settings"}),I18n.api_modal.developer_portal_button)):null}},{key:"renderEndpoint",value:function(){var onClickCopy=this.props.onClickCopy,toggleProps={types:this.getResourceTypes(),section:"api",title:I18n.api_modal.endpoint_title,onClickCopy:onClickCopy};return _react2.default.createElement(_ResourceToggle2.default,toggleProps)}},{key:"renderTarget",value:function(){var _this2=this,_props=this.props,isMobile=_props.isMobile,isTablet=_props.isTablet,targetProps={ref:function(_ref){return _this2.targetElement=_ref},onClick:this.openFlannel};if(isMobile||isTablet)return _react2.default.createElement("a",targetProps,I18n.action_buttons.api);return _react2.default.createElement("span",_lodash2.default.merge(targetProps,{className:"btn btn-simple btn-sm","aria-hidden":!0}),I18n.action_buttons.api)}},{key:"renderFlannel",value:function(){var _this3=this,flannelProps={id:"api-flannel",className:"api-flannel",target:function(){return _this3.targetElement},title:I18n.api_modal.title,onDismiss:this.closeFlannel},flannelHeaderProps={title:I18n.api_modal.title,onDismiss:this.closeFlannel};return _react2.default.createElement(_Flannel.Flannel,flannelProps,_react2.default.createElement(_Flannel.FlannelHeader,flannelHeaderProps),_react2.default.createElement(_Flannel.FlannelContent,null,_react2.default.createElement("div",null,I18n.api_modal.description),this.renderFoundryLinks(),this.renderEndpoint()))}},{key:"render",value:function(){var _props2=this.props,isMobile=_props2.isMobile,isTablet=_props2.isTablet;return this.shouldRender()?isMobile||isTablet?_react2.default.createElement("li",null,this.renderTarget(),this.state.flannelOpen&&this.renderFlannel()):_react2.default.createElement("div",{className:"btn-container"},this.renderTarget(),this.state.flannelOpen&&this.renderFlannel()):null}}]),ApiFlannel}();ApiFlannel.defaultProps={flannelOpen:!1},ApiFlannel.propTypes={onClickCopy:_propTypes2.default.func.isRequired,view:_propTypes2.default.object.isRequired,isTablet:_propTypes2.default.bool,isMobile:_propTypes2.default.bool,flannelOpen:_propTypes2.default.bool},exports.default=ApiFlannel},2835:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_locale=__webpack_require__(27),_feature_flags=__webpack_require__(17),_helpers=__webpack_require__(517),assetHelpers=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(276)),_user=__webpack_require__(151),_ExportFlannel2=_interopRequireDefault(__webpack_require__(944)),_ApiFlannel2=_interopRequireDefault(__webpack_require__(2834)),_ShareFlannel2=_interopRequireDefault(__webpack_require__(2823)),_ODataModal2=_interopRequireDefault(__webpack_require__(2822));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var InfoPaneButtons=function(_Component){function InfoPaneButtons(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InfoPaneButtons);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(InfoPaneButtons.__proto__||Object.getPrototypeOf(InfoPaneButtons)).call(this,props));return _this.openShareFlannel=function(){_this.setState({shareFlannelOpen:!0})},_this.closeShareFlannel=function(event){event&&!event.target.classList.contains("share-link")&&_this.setState({shareFlannelOpen:!1})},_this.state={shareFlannelOpen:!1},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(InfoPaneButtons,_react.Component),_createClass(InfoPaneButtons,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.alignActionButtons)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.alignActionButtons)}},{key:"alignActionButtons",value:function(){var infoPaneTitle=document.querySelector(".entry-title"),infoPaneBtns=document.querySelector(".entry-actions");infoPaneTitle&&infoPaneBtns&&(infoPaneBtns.offsetTop>infoPaneTitle.offsetTop?infoPaneBtns.classList.add("align-left"):infoPaneBtns.classList.remove("align-left"))}},{key:"useDataAssetStrings",value:function(){var view=this.props.view;return _feature_flags.FeatureFlags.value("usaid_features_enabled")&&view.metadata&&!0===view.metadata.isParent}},{key:"renderVisualizeAndFilterLink",value:function(){var _props=this.props,view=_props.view,onClickVisualizeAndFilter=_props.onClickVisualizeAndFilter;return view.isBlobby||view.isHref||!_.isString(view.bootstrapUrl)?null:_react2.default.createElement("li",null,_react2.default.createElement("a",{tabIndex:"0",role:"button","data-id":view.id,className:"option",href:view.bootstrapUrl,onClick:onClickVisualizeAndFilter},I18n.explore_data.create_visualization))}},{key:"renderCreateDataLensLink",value:function(){var _this2=this,_props2=this.props,view=_props2.view,onClickCreateDataLens=_props2.onClickCreateDataLens,doesUserHaveRights=_props2.doesUserHaveRights,dataLensBootstrapLink=this.state.dataLensBootstrapLink;if((0,_user.isLoggedIn)()&&assetHelpers.canBootstrapDataLens(view.coreView)&&doesUserHaveRights)return dataLensBootstrapLink||assetHelpers.generateDataLensBootstrapLink(view.coreView).then(function(response){response!==dataLensBootstrapLink&&_this2.setState({dataLensBootstrapLink:response})}),dataLensBootstrapLink?_react2.default.createElement("li",null,_react2.default.createElement("a",{tabIndex:"0",role:"button","data-id":view.id,className:"option",href:dataLensBootstrapLink,onClick:onClickCreateDataLens},I18n.explore_data.create_data_lens)):null}},{key:"renderViewDataButton",value:function(){var _props3=this.props,view=_props3.view,onClickGrid=_props3.onClickGrid;return view.isBlobby||view.isHref?null:_react2.default.createElement("a",{className:"btn btn-primary btn-sm view-data",href:(0,_locale.localizeLink)(view.gridUrl),onClick:onClickGrid},I18n.explore_data.view_data)}},{key:"renderOpenInCartoLink",value:function(){return this.props.view.cartoUrl?_react2.default.createElement("li",{key:"carto"},_react2.default.createElement("a",{role:"menuitem","data-modal":"carto-modal"},I18n.explore_data.openin_carto)):null}},{key:"renderOpenInPlotlyLink",value:function(){return _react2.default.createElement("li",{key:"plotly"},_react2.default.createElement("a",{role:"menuitem","data-modal":"plotly-modal"},I18n.explore_data.openin_plotly))}},{key:"renderExternalIntegrations",value:function(){var view=this.props.view;if(!_feature_flags.FeatureFlags.value("enable_external_data_integrations"))return[];var listItems=[];return view.isPrivate||(listItems.push(_react2.default.createElement("li",{key:"separator",className:"openin-separator"},I18n.explore_data.openin_separator)),listItems.push(this.renderOpenInCartoLink()),listItems.push(this.renderOpenInPlotlyLink()),listItems.push(_react2.default.createElement("li",{key:"more"},_react2.default.createElement("a",{className:"more-options-button",href:"https://support.socrata.com/hc/en-us/articles/115010730868"},I18n.explore_data.more)))),listItems}},{key:"renderExploreDataDropdown",value:function(){var view=this.props.view;return view.isBlobby||view.isHref?null:_react2.default.createElement("div",{className:"dropdown explore-dropdown btn btn-simple btn-sm","data-dropdown":!0,"data-orientation":"bottom"},_react2.default.createElement("span",{className:"btn-label","aria-hidden":!0},I18n.action_buttons.visualize),_react2.default.createElement("span",{className:"icon icon-arrow-down"}),_react2.default.createElement("ul",{role:"menu","aria-label":I18n.action_buttons.visualize,className:"dropdown-options"},this.renderVisualizeAndFilterLink(),this.renderCreateDataLensLink(),this.renderExternalIntegrations()))}},{key:"renderMoreActions",value:function(){var _this3=this,_props4=this.props,view=_props4.view,onWatchDatasetFlagClick=_props4.onWatchDatasetFlagClick,isMobile=_props4.isMobile,isTablet=_props4.isTablet,isBlobbyOrHref=view.isBlobby||view.isHref,contactFormLink=view.disableContactDatasetOwner?null:_react2.default.createElement("li",null,_react2.default.createElement("a",{tabIndex:"0",role:"button",className:"option","data-modal":"contact-form"},this.useDataAssetStrings()?I18n.action_buttons.contact_asset_owner:I18n.action_buttons.contact_owner)),commentLink=view.commentUrl?_react2.default.createElement("li",null,_react2.default.createElement("a",{className:"option",href:(0,_locale.localizeLink)(view.commentUrl)},I18n.action_buttons.comment)):null,odataLink=null;isBlobbyOrHref||(odataLink=_react2.default.createElement("li",null,_react2.default.createElement("a",{tabIndex:"0",role:"button",className:"option","data-modal":"odata-modal"},I18n.action_buttons.odata)));var watchDatasetLink=null,userNotificationsEnabled=!0===_feature_flags.FeatureFlags.value("enable_user_notifications");if(""!==_.get(window,"sessionData.email","")&&userNotificationsEnabled){var watchDatasetLinkText=void 0;watchDatasetLinkText=this.useDataAssetStrings()?view.subscribed?I18n.action_buttons.unwatch_data_asset:I18n.action_buttons.watch_data_asset:view.subscribed?I18n.action_buttons.unwatch_dataset:I18n.action_buttons.watch_dataset,watchDatasetLink=_react2.default.createElement("li",null,_react2.default.createElement("a",{tabIndex:"0",role:"button",className:"option watch-dataset-link",onClick:function(event){return onWatchDatasetFlagClick(_this3.props,event)}},watchDatasetLinkText))}var apiLink=null,enableDatasetLandingPageFoundryLinks=_feature_flags.FeatureFlags.value("enable_dataset_landing_page_foundry_links");if(!isBlobbyOrHref&&enableDatasetLandingPageFoundryLinks&&(isMobile||isTablet)){var apiLinkProps={tabIndex:0,role:"button",className:"option",href:view.apiFoundryUrl};apiLink=_react2.default.createElement("li",null,_react2.default.createElement("a",apiLinkProps,I18n.api_modal.foundry_button))}var shareLinkProps={className:"option share-link","aria-hidden":!0,onClick:this.openShareFlannel},shareLink=view.isPrivate&&(0,_helpers.scgcEnabled)()?null:_react2.default.createElement("li",null,_react2.default.createElement("a",shareLinkProps,I18n.action_buttons.share));return _react2.default.createElement("div",{className:"btn btn-simple btn-sm dropdown more",onClick:function(event){return _this3.closeShareFlannel(event)},"data-dropdown":!0,"data-orientation":"bottom"},_react2.default.createElement("span",{"aria-hidden":!0,className:"icon-waiting"}),_react2.default.createElement("ul",{className:"dropdown-options"},shareLink,watchDatasetLink,contactFormLink,commentLink,odataLink,apiLink))}},{key:"render",value:function(){var _props5=this.props,view=_props5.view,isMobile=_props5.isMobile,isTablet=_props5.isTablet,shareFlannelOpen=this.state.shareFlannelOpen,shouldApiLinkRender=!(view.isBlobby||view.isHref)&&!(isMobile||isTablet),apiLink=null,shareFlannel=null;return shareFlannelOpen&&(shareFlannel=_react2.default.createElement(_ShareFlannel2.default,_extends({},this.props,{flannelTargetElement:function(){return document.getElementsByClassName("dropdown more")[0]},flannelOpen:shareFlannelOpen,onCloseShareFlannel:this.closeShareFlannel}))),shouldApiLinkRender&&(apiLink=_react2.default.createElement(_ApiFlannel2.default,this.props)),_react2.default.createElement("div",{className:"btn-group"},this.renderViewDataButton(),this.renderExploreDataDropdown(),_react2.default.createElement(_ExportFlannel2.default,_extends({},this.props,{exportFormats:view.exportFormats})),apiLink,shareFlannel,this.renderMoreActions(),_react2.default.createElement(_ODataModal2.default,this.props))}}]),InfoPaneButtons}();exports.default=InfoPaneButtons,InfoPaneButtons.propTypes={view:_propTypes2.default.object.isRequired,onDownloadData:_propTypes2.default.func.isRequired,onClickShareOption:_propTypes2.default.func.isRequired,onClickGrid:_propTypes2.default.func,onClickCreateDataLens:_propTypes2.default.func,onClickVisualizeAndFilter:_propTypes2.default.func,isDesktop:_propTypes2.default.bool,isTablet:_propTypes2.default.bool,isMobile:_propTypes2.default.bool,onWatchDatasetFlagClick:_propTypes2.default.func,onSubscriptionChange:_propTypes2.default.func,doesUserHaveRights:_propTypes2.default.bool}},2836:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapStateToProps=mapStateToProps;var _react2=_interopRequireDefault(__webpack_require__(0)),_reactRedux=__webpack_require__(4),_lodash2=_interopRequireDefault(__webpack_require__(2)),_dates=__webpack_require__(85),_InfoPaneButtons2=_interopRequireDefault(__webpack_require__(2835)),_InfoPaneComponent2=_interopRequireDefault(__webpack_require__(627)),_subscriptionStore2=_interopRequireDefault(__webpack_require__(940)),_view=__webpack_require__(307),_feature_flags=__webpack_require__(17),_helpers=__webpack_require__(276);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mapStateToProps(state){var view=state.view,attribution=view.attribution?{label:I18n.published_by,content:view.attribution}:null,userNotificationsEnabled=!0===_feature_flags.FeatureFlags.value("enable_user_notifications"),metadataValues=[];!0===_feature_flags.FeatureFlags.value("hide_dates_on_primer_and_data_catalog")||metadataValues.push({label:I18n.common.updated,content:(0,_dates.formatDateWithLocale)(view.lastUpdatedAt)}),metadataValues.push(attribution);var metadata={first:metadataValues.shift(),second:metadataValues.shift()};return{name:view.name,description:view.description,category:view.category,provenance:view.provenance,isInternal:(0,_helpers.assetIsInternal)(view.coreView),isPrivate:view.isPrivate,subscribed:view.subscribed,view:view,showWatchDatasetFlag:""!==_lodash2.default.get(window,"sessionData.email","")&&userNotificationsEnabled,metadata:metadata,onWatchDatasetFlagClick:function(ownProps,event){(view.subscribed?_subscriptionStore2.default.unsubscribe(view.subscriptionId):_subscriptionStore2.default.subscribe(view.id)).then(function(subscribedResult){ownProps.onSubscriptionChange(_lodash2.default.get(subscribedResult,"id",null))}).catch(function(){ownProps.onSubscriptionChange(null)}),event.preventDefault()},doesUserHaveRights:!_lodash2.default.isEmpty(_lodash2.default.get(window,"serverConfig.currentUser.rights",[])),renderButtons:function(ownProps){var onClickCopy=ownProps.onClickCopy,onClickGrid=ownProps.onClickGrid,onClickShareOption=ownProps.onClickShareOption,onDownloadData=ownProps.onDownloadData,isDesktop=ownProps.isDesktop,isTablet=ownProps.isTablet,isMobile=ownProps.isMobile,onWatchDatasetFlagClick=ownProps.onWatchDatasetFlagClick,onSubscriptionChange=ownProps.onSubscriptionChange,doesUserHaveRights=ownProps.doesUserHaveRights,childProps={view:view,onClickCopy:onClickCopy,onClickGrid:onClickGrid,onClickShareOption:onClickShareOption,onDownloadData:onDownloadData,isDesktop:isDesktop,isTablet:isTablet,isMobile:isMobile,onWatchDatasetFlagClick:onWatchDatasetFlagClick,onSubscriptionChange:onSubscriptionChange,doesUserHaveRights:doesUserHaveRights};return _react2.default.createElement(_InfoPaneButtons2.default,childProps)}}}exports.default=(0,_reactRedux.connect)(mapStateToProps,function(dispatch){return{onClickCopy:function(){},onClickGrid:function(){},onClickVisualizeAndFilter:function(){},onClickCreateDataLens:function(){},onClickPlotly:function(){},onClickShareOption:function(){},onDownloadData:function(){},onExpandDescription:function(){},onSubscriptionChange:function(subscriptionId){dispatch((0,_view.onSubscriptionChange)(subscriptionId))}}})(_InfoPaneComponent2.default)},2837:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HrefDownload=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4),_feature_flags=__webpack_require__(17),_lodash2=_interopRequireDefault(__webpack_require__(2));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HrefDownload=exports.HrefDownload=function(_Component){function HrefDownload(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HrefDownload),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(HrefDownload.__proto__||Object.getPrototypeOf(HrefDownload)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(HrefDownload,_react.Component),_createClass(HrefDownload,[{key:"hasAccessPoints",value:function(allAccessPoints){return!(_lodash2.default.isEmpty(allAccessPoints)||1===allAccessPoints.length&&_lodash2.default.isEmpty(allAccessPoints[0]))}},{key:"renderUSAIDUploadPrompt",value:function(){return _react2.default.createElement("div",{className:"section-content"},_react2.default.createElement("div",{className:"button-group"},_react2.default.createElement("span",null,"There are no associated datasets."),_react2.default.createElement("br",null),_react2.default.createElement("a",{href:"/datasets/new?beta=true&data_asset=false",className:"btn btn-primary btn-sm btn-alternate-2"},_react2.default.createElement("span",null,"Create a new Dataset"))))}},{key:"renderLinks",value:function(allAccessPoints){if(this.hasAccessPoints(allAccessPoints)){var content=_lodash2.default.map(allAccessPoints,function(accessPoint,i){var buttons=_lodash2.default.map(accessPoint.urls,function(url,mimeType){return _react2.default.createElement("a",{className:"btn btn-primary btn-sm download all-caps",href:url,target:"_blank",key:mimeType},mimeType)});return accessPoint.describedBy&&buttons.push(_react2.default.createElement("a",{key:"data-dictionary",className:"btn btn-simple btn-sm download",href:accessPoint.describedBy,target:"_blank"},I18n.href_download.data_dictionary)),_lodash2.default.isEmpty(accessPoint)?null:_react2.default.createElement("div",{key:i,className:"download-object"},_react2.default.createElement("div",{className:"download-title"},accessPoint.title),_react2.default.createElement("p",{className:"download-description"},accessPoint.description),_react2.default.createElement("div",{className:"download-buttons"},buttons))});return _react2.default.createElement("div",{className:"section-content"},content)}}},{key:"render",value:function(){var view=this.props.view,isHref=view.isHref,allAccessPoints=this.props.view.allAccessPoints,hasAccessPoints=this.hasAccessPoints(allAccessPoints),isUSAID=_feature_flags.FeatureFlags.value("usaid_features_enabled"),isParent=view.metadata&&!0===view.metadata.isParent,showUSAIDUploadPrompt=isUSAID&&isParent&&!hasAccessPoints;if(!isHref&&!hasAccessPoints)return null;var hrefTitle=void 0;return hrefTitle=isUSAID&&isParent?_react2.default.createElement("h2",{className:"landing-page-section-header"},I18n.href_download.associated_datasets):_react2.default.createElement("h2",{className:"landing-page-section-header"},I18n.href_download.title),_react2.default.createElement("section",{className:"landing-page-section href-download dataset-download-section"},hrefTitle,showUSAIDUploadPrompt?this.renderUSAIDUploadPrompt():this.renderLinks(allAccessPoints))}}]),HrefDownload}();HrefDownload.propTypes={view:_propTypes2.default.object.isRequired},exports.default=(0,_reactRedux.connect)(function(state){return _lodash2.default.pick(state,"view")})(HrefDownload)},2838:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.collectionParentLink=void 0;var obj,_react=__webpack_require__(0),_react2=(obj=_react)&&obj.__esModule?obj:{default:obj};exports.collectionParentLink=function(collectionParent){return _react2.default.createElement("section",{className:"landing-page-section href-download dataset-download-section"},_react2.default.createElement("div",{className:"section-content"},_react2.default.createElement("div",{className:"download-object"},_react2.default.createElement("div",{className:"download-title"},"Associated with"),_react2.default.createElement("div",{className:"download-buttons"},_react2.default.createElement("a",{className:"btn btn-primary btn-sm download all-caps",id:"collection-parent-link",href:"/d/"+collectionParent.id,target:"_blank",key:collectionParent.id},collectionParent.name)))))}},2839:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeaturedContent=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4),_FeaturedViewCard2=_interopRequireDefault(__webpack_require__(945)),_user=__webpack_require__(151),Rights=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(370));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FeaturedContent=exports.FeaturedContent=function(_Component){function FeaturedContent(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FeaturedContent),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FeaturedContent.__proto__||Object.getPrototypeOf(FeaturedContent)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FeaturedContent,_react.Component),_createClass(FeaturedContent,[{key:"renderManagePrompt",value:function(){var _props=this.props,isBlobby=_props.isBlobby,isHref=_props.isHref;if(!(0,_user.userHasRight)(Rights.edit_others_datasets))return null;var translationKey=isBlobby||isHref?"message_external":"message",message=I18n.featured_content.manage_prompt[translationKey];return _react2.default.createElement("div",{className:"alert default manage-prompt"},_react2.default.createElement("span",{className:"manage-prompt-message"},message),_react2.default.createElement("button",{className:"btn btn-sm btn-default manage-prompt-button","data-modal":"featured-content-modal"},I18n.featured_content.manage_prompt.button))}},{key:"renderFeaturedContent",value:function(){var contentList=this.props.contentList;if(_lodash2.default.every(contentList,_lodash2.default.isNull))return null;var cards=_lodash2.default.map(_lodash2.default.compact(contentList),function(featuredItem,i){return _react2.default.createElement(_FeaturedViewCard2.default,{key:i,featuredItem:featuredItem})});return _react2.default.createElement("div",{className:"media-results"},cards)}},{key:"render",value:function(){var contentList=this.props.contentList;return _lodash2.default.some(contentList)||(0,_user.userHasRight)(Rights.create_datasets)?_react2.default.createElement("section",{className:"landing-page-section featured-content"},_react2.default.createElement("h2",{className:"landing-page-section-header"},I18n.featured_content.title),this.renderManagePrompt(),this.renderFeaturedContent()):null}}]),FeaturedContent}();FeaturedContent.propTypes={contentList:_propTypes2.default.array.isRequired,isBlobby:_propTypes2.default.bool,isHref:_propTypes2.default.bool},exports.default=(0,_reactRedux.connect)(function(state){return{isBlobby:state.view.isBlobby,isHref:state.view.isHref,contentList:state.featuredContent.contentList}})(FeaturedContent)},2840:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DatasetPreview=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4),_visualizations=__webpack_require__(113),_feature_flags2=_interopRequireDefault(__webpack_require__(17)),_QueryEditor2=_interopRequireDefault(__webpack_require__(1146)),_locale=__webpack_require__(27),_dataset_helpers=__webpack_require__(502);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var DatasetPreview=exports.DatasetPreview=function(_Component){function DatasetPreview(){var _ref,_temp,_this,_this2=this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DatasetPreview);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=DatasetPreview.__proto__||Object.getPrototypeOf(DatasetPreview)).call.apply(_ref,[this].concat(args))),_this.state={showingQueryEditor:!1},_this.closeSoqlEditor=function(){_this.setState({showingQueryEditor:!1})},_this.renderQueryEditor=function(){var fn,_ref2,view=_this.props.view,onQueryEditorConfirm=(fn=regeneratorRuntime.mark(function _callee(query){var childView;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,(0,_dataset_helpers.createChildView)(view.coreView,query,I18n.screens.ds.bar.create_view_name_prefix+" "+view.coreView.name);case 3:if((childView=_context.sent)&&childView.id){_context.next=6;break}throw new Error("Error creating view; got "+childView);case 6:document.location.href="/d/"+childView.id,_context.next=12;break;case 9:_context.prev=9,_context.t0=_context.catch(0),console.error(_context.t0);case 12:case"end":return _context.stop()}},_callee,_this2,[[0,9]])}),_ref2=function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){return function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}("next")})},function(_x){return _ref2.apply(this,arguments)});return _react2.default.createElement(_QueryEditor2.default,{assetUid:view.id,confirmButtonText:I18n.dataset_preview.create_view_with_query,onCancel:function(){return _this.setState({showingQueryEditor:!1})},onConfirm:onQueryEditorConfirm})},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DatasetPreview,_react.Component),_createClass(DatasetPreview,[{key:"renderActionButton",value:function(){var _this3=this,_props=this.props,view=_props.view,onClickGrid=_props.onClickGrid,createVisualizationLink=null;_lodash2.default.isString(view.bootstrapUrl)&&(createVisualizationLink=_react2.default.createElement("a",{href:view.bootstrapUrl,className:"btn btn-default btn-sm btn-visualize"},I18n.dataset_preview.create_visualization_link));var queryEditorButton=_feature_flags2.default.value("enable_2018_soql_query_editor")&&_react2.default.createElement("button",{className:"btn btn-default btn-sm create-view-button",role:"button",onClick:function(){return _this3.setState({showingQueryEditor:!0})}},I18n.dataset_preview.create_view);return _react2.default.createElement("div",null,_react2.default.createElement("a",{href:(0,_locale.localizeLink)(view.gridUrl),className:"btn btn-primary btn-sm btn-grid view-data",onClick:onClickGrid},I18n.dataset_preview.grid_view_link),queryEditorButton,createVisualizationLink)}},{key:"renderTable",value:function(){var vif=this.props.vif,options=_lodash2.default.has(window,"serverConfig.locale")?{locale:window.serverConfig.locale}:{locale:""};return _react2.default.createElement("div",{className:"table-contents"},_react2.default.createElement(_visualizations.components.Visualization,{vif:vif,options:options}))}},{key:"render",value:function(){var view=this.props.view,showingQueryEditor=this.state.showingQueryEditor;return view.isTabular&&!_lodash2.default.isEmpty(view.columns)&&view.rowCount>0?_react2.default.createElement("section",{className:"landing-page-section dataset-preview"},_react2.default.createElement("div",{className:"landing-page-header-wrapper"},_react2.default.createElement("h2",{className:"landing-page-section-header"},I18n.dataset_preview.title),this.renderActionButton()),this.renderTable(),showingQueryEditor&&this.renderQueryEditor()):null}}]),DatasetPreview}();DatasetPreview.propTypes={onClickGrid:_propTypes2.default.func,view:_propTypes2.default.object.isRequired,vif:_propTypes2.default.object.isRequired},exports.default=(0,_reactRedux.connect)(function(_ref3){var view=_ref3.view;return{view:view,vif:{format:{type:"visualization_interchange_format",version:3},configuration:{viewSourceDataLink:!1},series:[{dataSource:{datasetUid:view.id,dimension:{},type:"socrata.soql",filters:[],readFromNbe:!1},type:"table",unit:{one:view.rowLabel,other:view.rowLabelMultiple}}]}}},function(){return{onClickGrid:function(){}}})(DatasetPreview)},2841:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapStateToProps=mapStateToProps;var _reactRedux=__webpack_require__(4),_components=__webpack_require__(9),_helpers=__webpack_require__(276);function mapStateToProps(state){var view=state.view,cannotPreview={isPreviewable:!1};return view.isBlobby&&("google_viewer"!==view.blobType||(0,_helpers.assetIsPublic)(view.coreView))?{isPreviewable:!0,previewUrl:"/api/views/"+view.id+"/files/"+view.blobId,previewType:view.blobType,blobName:view.name}:cannotPreview}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_components.BlobPreview)},2842:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapStateToProps=mapStateToProps;var _reactRedux=__webpack_require__(4),_components=__webpack_require__(9);function mapStateToProps(state){var view=state.view,downloadLink="/download/"+view.id+"/"+encodeURIComponent(_.replace(view.blobMimeType,/;.*/,""));return{showDownloadSection:view.isBlobby,blobFilename:view.blobFilename,downloadLink:downloadLink}}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_components.BlobDownload)},2843:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlertNotice=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_redux=__webpack_require__(14),_reactRedux=__webpack_require__(4),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_view=__webpack_require__(307),_Notice2=_interopRequireDefault(__webpack_require__(946));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var AlertNotice=exports.AlertNotice=function(_Component){function AlertNotice(){var _ref,_temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AlertNotice);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=AlertNotice.__proto__||Object.getPrototypeOf(AlertNotice)).call.apply(_ref,[this].concat(args))),_this.onClickDismiss=function(){_this.props.onAlertSavedNoticeClose()},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AlertNotice,_react.Component),_createClass(AlertNotice,[{key:"render",value:function(){return this.props.view.showAlertSavedNotice?_react2.default.createElement(_Notice2.default,{onClickDismiss:this.onClickDismiss},_react2.default.createElement("span",null,I18n.alert_saved_message)):null}}]),AlertNotice}();AlertNotice.propTypes={view:_propTypes2.default.object.isRequired,onAlertSavedNoticeClose:_propTypes2.default.func.isRequired},exports.default=(0,_reactRedux.connect)(function(state){return _lodash2.default.pick(state,"view")},function(dispatch){return(0,_redux.bindActionCreators)({onAlertSavedNoticeClose:_view.handleAlertNoticeClose},dispatch)})(AlertNotice)},2844:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_breakpoints2=_interopRequireDefault(__webpack_require__(947));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Responsive=function(_Component){function Responsive(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Responsive);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Responsive.__proto__||Object.getPrototypeOf(Responsive)).call(this,props));return _this.state=_this.getState(),_.bindAll(_this,"updateState"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Responsive,_react.Component),_createClass(Responsive,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateState)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateState)}},{key:"getState",value:function(){return window.matchMedia("(max-width: "+_breakpoints2.default.mobile+"px)").matches?{isDesktop:!1,isTablet:!1,isMobile:!0}:window.matchMedia("(max-width: "+_breakpoints2.default.tablet+"px)").matches?{isDesktop:!1,isTablet:!0,isMobile:!1}:{isDesktop:!0,isTablet:!1,isMobile:!1}}},{key:"updateState",value:function(){var newState=this.getState();_.isEqual(newState,this.state)||this.setState(newState)}},{key:"render",value:function(){var state=this.state,children=_react.Children.map(this.props.children,function(child){return _react2.default.cloneElement(child,state)});return _react2.default.createElement("div",null,children)}}]),Responsive}();Responsive.propTypes={children:_propTypes2.default.object.isRequired},exports.default=Responsive},2845:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(4),_feature_flags2=_interopRequireDefault(__webpack_require__(17)),_Responsive2=_interopRequireDefault(__webpack_require__(2844)),_AlertNotice2=_interopRequireDefault(__webpack_require__(2843)),_BlobDownload2=_interopRequireDefault(__webpack_require__(2842)),_BlobPreview2=_interopRequireDefault(__webpack_require__(2841)),_DatasetPreview2=_interopRequireDefault(__webpack_require__(2840)),_FeaturedContent2=_interopRequireDefault(__webpack_require__(2839)),_CollectionParentLink=__webpack_require__(2838),_HrefDownload2=_interopRequireDefault(__webpack_require__(2837)),_InfoPane2=_interopRequireDefault(__webpack_require__(2836)),_MetadataTable2=_interopRequireDefault(__webpack_require__(2821)),_PrivateNotice2=_interopRequireDefault(__webpack_require__(2818)),_PublishNotice2=_interopRequireDefault(__webpack_require__(2817)),_RelatedViewList2=_interopRequireDefault(__webpack_require__(2816)),_RowDetails2=_interopRequireDefault(__webpack_require__(2814)),_SchemaDotOrgMarkup=__webpack_require__(2812),_SchemaDotOrgMarkup2=_interopRequireDefault(_SchemaDotOrgMarkup),_SchemaPreview2=_interopRequireDefault(__webpack_require__(2811));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var App=exports.App=function(_Component){function App(){var _ref,_temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,App);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=App.__proto__||Object.getPrototypeOf(App)).call.apply(_ref,[this].concat(args))),_this.showCollectionParent=function(){return _feature_flags2.default.value("usaid_features_enabled")&&_this.props.view&&_this.props.view.collectionParentView},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(App,_react.Component),_createClass(App,[{key:"renderDatasetContainer",value:function(){return _react2.default.createElement("div",{itemScope:!0,itemType:_SchemaDotOrgMarkup.Taxonomy.DATASET},_react2.default.createElement(_AlertNotice2.default,null),_react2.default.createElement(_PublishNotice2.default,null),_react2.default.createElement(_PrivateNotice2.default,null),_react2.default.createElement(_SchemaDotOrgMarkup2.default,null),_react2.default.createElement(_Responsive2.default,null,_react2.default.createElement(_InfoPane2.default,null)),_react2.default.createElement("div",{className:"container landing-page-container"},_react2.default.createElement(_FeaturedContent2.default,null),this.showCollectionParent()&&(0,_CollectionParentLink.collectionParentLink)(this.props.view.collectionParentView),_react2.default.createElement(_MetadataTable2.default,null),_react2.default.createElement(_RowDetails2.default,null),_react2.default.createElement(_SchemaPreview2.default,null),_react2.default.createElement(_DatasetPreview2.default,null),_react2.default.createElement(_Responsive2.default,null,_react2.default.createElement(_RelatedViewList2.default,null))))}},{key:"renderBlobContainer",value:function(){return _react2.default.createElement("div",{itemScope:!0,itemType:_SchemaDotOrgMarkup.Taxonomy.DATASET},_react2.default.createElement(_AlertNotice2.default,null),_react2.default.createElement(_PublishNotice2.default,null),_react2.default.createElement(_PrivateNotice2.default,null),_react2.default.createElement(_SchemaDotOrgMarkup2.default,null),_react2.default.createElement(_InfoPane2.default,null),_react2.default.createElement("div",{className:"container landing-page-container"},_react2.default.createElement(_BlobPreview2.default,null),_react2.default.createElement(_FeaturedContent2.default,null),this.showCollectionParent()&&(0,_CollectionParentLink.collectionParentLink)(this.props.view.collectionParentView),_react2.default.createElement(_BlobDownload2.default,null),_react2.default.createElement(_MetadataTable2.default,null)))}},{key:"renderHrefContainer",value:function(){return _react2.default.createElement("div",{itemScope:!0,itemType:_SchemaDotOrgMarkup.Taxonomy.DATASET},_react2.default.createElement(_AlertNotice2.default,null),_react2.default.createElement(_PublishNotice2.default,null),_react2.default.createElement(_PrivateNotice2.default,null),_react2.default.createElement(_SchemaDotOrgMarkup2.default,null),_react2.default.createElement(_InfoPane2.default,null),_react2.default.createElement("div",{className:"container landing-page-container"},_react2.default.createElement(_FeaturedContent2.default,null),this.showCollectionParent()&&(0,_CollectionParentLink.collectionParentLink)(this.props.view.collectionParentView),_react2.default.createElement(_HrefDownload2.default,null),_react2.default.createElement(_MetadataTable2.default,null)))}},{key:"render",value:function(){var view=this.props.view;return view.isBlobby?this.renderBlobContainer():view.isHref?this.renderHrefContainer():this.renderDatasetContainer()}}]),App}();App.propTypes={view:_propTypes2.default.object},exports.default=(0,_reactRedux.connect)(function(state){return _.pick(state,"view")})(App)},2846:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_reactRedux=__webpack_require__(4),_reactHotLoader=__webpack_require__(95),_App2=_interopRequireDefault(__webpack_require__(2845));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Root=function(_ref){var store=_ref.store;return _react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_App2.default,null))};Root.propTypes={store:_propTypes2.default.object.isRequired},exports.default=(0,_reactHotLoader.hot)(module)(Root)}).call(this,__webpack_require__(53)(module))},2847:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(state,action){if(_lodash2.default.isUndefined(state))return initialState;switch(action.type){case _actionTypes.SET_CONTACT_FORM_FIELD:return _extends({},state,{fields:_extends({},state.fields,function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}({},action.field,action.value))});case _actionTypes.SET_CONTACT_FORM_RECAPTCHA_LOADED:return _extends({},state,{recaptchaLoaded:action.value});case _actionTypes.SEND_CONTACT_FORM:return _extends({},state,{status:"sending"});case _actionTypes.RESET_CONTACT_FORM:return initialState;case _actionTypes.HANDLE_CONTACT_FORM_SUCCESS:return _extends({},state,{status:"success"});case _actionTypes.HANDLE_CONTACT_FORM_FAILURE:return _extends({},state,{status:"failure"});case _actionTypes.HANDLE_CONTACT_FORM_RECAPTCHA_ERROR:return _extends({},state,{status:"",fields:_extends({},state.fields,{recaptchaResponseToken:""}),resetRecaptcha:!0});case _actionTypes.HANDLE_CONTACT_FORM_RECAPTCHA_RESET:return _extends({},state,{resetRecaptcha:!1});default:return state}};var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj},_http=__webpack_require__(25),_actionTypes=__webpack_require__(149);var currentUserEmail=_lodash2.default.get(window.sessionData,"email",""),initialState={fields:{email:{value:currentUserEmail,invalid:_lodash2.default.isEmpty(currentUserEmail)},subject:{value:"",invalid:!0},message:{value:"",invalid:!0},recaptchaResponseToken:""},recaptchaLoaded:!1,resetRecaptcha:!1,status:"",token:(0,_http.csrfToken)()}},2848:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(state,action){if(_lodash2.default.isUndefined(state))return initialState;switch(action.type){case _actionTypes.REQUEST_RELATED_VIEWS:return _extends({},state,{isLoading:!0});case _actionTypes.RECEIVE_RELATED_VIEWS:var additionalViews=_lodash2.default.take(action.relatedViews,_constants.RELATED_VIEWS_FETCH_LIMIT),viewList=_lodash2.default.clone(state.viewList).concat(additionalViews);return _extends({},state,{viewList:viewList,hasMore:action.relatedViews.length>_constants.RELATED_VIEWS_FETCH_LIMIT,hasError:!1,isLoading:!1});case _actionTypes.HANDLE_RELATED_VIEWS_ERROR:return _extends({},state,{hasError:!0,isLoading:!1});case _actionTypes.DISMISS_RELATED_VIEWS_ERROR:return _extends({},state,{hasError:!1});case _actionTypes.TOGGLE_RELATED_VIEWS:return _extends({},state,{isCollapsed:!state.isCollapsed});default:return state}};var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj},_constants=__webpack_require__(628),_actionTypes=__webpack_require__(149);var initialRelatedViews=_lodash2.default.get(window.initialState,"relatedViews",[]),initialState={viewList:_lodash2.default.take(initialRelatedViews,_constants.RELATED_VIEWS_FETCH_LIMIT),hasMore:initialRelatedViews.length>_constants.RELATED_VIEWS_FETCH_LIMIT,hasError:!1,isLoading:!1,isCollapsed:!1}},2849:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(state,action){if(_lodash2.default.isUndefined(state))return initialState;switch(action.type){case _actionTypes.EDIT_FEATURED_ITEM:if("external"===action.featuredItem.contentType){var previewImage=action.featuredItem.previewImageId||action.featuredItem.previewImage;return _extends({},state,{description:action.featuredItem.description,previewImage:(0,_viewCardHelpers.translatePreviewImageIdToImageUrl)(previewImage),title:action.featuredItem.title,url:action.featuredItem.url,canSave:canSave(state)})}return state;case _actionTypes.SET_EXTERNAL_RESOURCE_FIELD:var newState=_extends({},state,function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}({},action.field,action.value));return newState.canSave=canSave(newState),newState;case _actionTypes.CANCEL_FEATURED_ITEM_EDIT:return initialState;default:return state}};var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj},_constants=__webpack_require__(219),_actionTypes=__webpack_require__(149),_viewCardHelpers=__webpack_require__(231);var initialState={description:"",previewImage:"",title:"",url:"",canSave:!1};function canSave(state){return!_lodash2.default.isEmpty(state.title)&&_constants.VALID_URL_REGEX.test(state.url)}},2850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(state,action){if(_lodash2.default.isUndefined(state))return initialState;switch(state=_lodash2.default.clone(state),action.type){case _actionTypes.CANCEL_FEATURED_ITEM_EDIT:return initialState;case _actionTypes.EDIT_FEATURED_ITEM:var featuredView=action.featuredItem.featuredView;return"internal"===action.featuredItem.contentType&&"story"===featuredView.displayType&&((state=updatePreviewValues(state,featuredView)).url=featuredView.url,state.canSave=canSave(state)),state;case _actionTypes.HANDLE_LOADING_STORY_ERROR:return(state=restorePreviewValues(state)).hasValidationError=!0,state.isLoadingStory=!1,state.canSave=canSave(state),state;case _actionTypes.HANDLE_LOADING_STORY_SUCCESS:return(state=updatePreviewValues(state,action.story)).hasValidationError=!1,state.isLoadingStory=!1,state.canSave=canSave(state),state;case _actionTypes.REQUESTED_STORY:return state.shouldLoadStory=!1,state.isLoadingStory=!0,state;case _actionTypes.SET_STORY_URL_FIELD:return state.url=action.value,validUrl(action.value)?(state.hasValidationError=!1,state.shouldLoadStory=!0):((state=restorePreviewValues(state)).hasValidationError=!0,state.canSave=canSave(state)),state;default:return state}};var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj},_constants=__webpack_require__(219),_actionTypes=__webpack_require__(149);var initialState=_lodash2.default.merge({canSave:!1,hasValidationError:!1,isLoadingStory:!1,shouldLoadStory:!1,url:"",imageUrl:""},{createdAt:"",description:"",title:"",viewCount:null});function validUrl(url){return!_lodash2.default.isEmpty(url)&&_constants.VALID_STORY_URL_REGEX.test(url)}function canSave(state){return!state.hasValidationError&&!state.isLoadingStory&&validUrl(state.url)}function restorePreviewValues(state){return _lodash2.default.merge(state,{createdAt:"",description:"",title:"",viewCount:null})}function updatePreviewValues(state,story){return _lodash2.default.merge(state,{description:story.description,title:story.title||story.name,createdAt:story.createdAt,viewCount:story.viewCount,imageUrl:story.imageUrl,isPrivate:story.isPrivate})}},2851:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(state,action){if(_lodash2.default.isUndefined(state))return initialState;switch(action.type){case _actionTypes.REQUESTED_DERIVED_VIEWS:return _extends({},state,{isLoading:!0});case _actionTypes.HANDLE_DERIVED_VIEWS_REQUEST_ERROR:return _extends({},state,{isLoading:!1,hasError:!0});case _actionTypes.RECEIVE_DERIVED_VIEWS:return _extends({},state,{isLoading:!1,viewList:action.views});default:return state}};var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj},_actionTypes=__webpack_require__(149);var initialState={hasError:!1,isLoading:!1,viewList:[]}},2852:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEditTypeFromFeaturedItem=function(featuredItem){if("external"===featuredItem.contentType)return"externalResource";if("internal"===featuredItem.contentType)return"story"===featuredItem.featuredView.displayType?"story":"visualization"}},2853:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(state,action){if(_lodash2.default.isUndefined(state))return _extends({},initialState,{viewSelector:(0,_viewSelector2.default)(state,action),story:(0,_story2.default)(state,action),externalResource:(0,_externalResource2.default)(state,action)});switch(state=_extends({},state,{viewSelector:(0,_viewSelector2.default)(state.viewSelector,action),story:(0,_story2.default)(state.story,action),externalResource:(0,_externalResource2.default)(state.externalResource,action)}),action.type){case _actionTypes.ADD_FEATURED_ITEM:return _extends({},state,{isEditing:!0,editType:action.editType,editPosition:action.position});case _actionTypes.EDIT_FEATURED_ITEM:return _extends({},state,{isEditing:!0,editType:(0,_featuredContent.getEditTypeFromFeaturedItem)(action.featuredItem),editPosition:action.featuredItem.position});case _actionTypes.CANCEL_FEATURED_ITEM_EDIT:return _extends({},state,{isEditing:!1,editType:null,editPosition:null,isSaving:!1,isSaved:!1,hasSaveError:!1,isRemoving:!1,removePosition:null,hasRemoveError:!1});case _actionTypes.REQUESTED_FEATURED_ITEM_SAVE:return _extends({},state,{isSaving:!0,hasSaveError:!1});case _actionTypes.SET_SAVING_FEATURED_ITEM:return _extends({},state,{isSavingViewUid:action.viewUid});case _actionTypes.HANDLE_FEATURED_ITEM_SAVE_SUCCESS:return _extends({},state,{contentList:_lodash2.default.set(_lodash2.default.clone(state.contentList),action.position,action.featuredItem),isSaving:!1,isSaved:!0});case _actionTypes.HANDLE_FEATURED_ITEM_SAVE_ERROR:return _extends({},state,{isSaving:!1,hasSaveError:!0});case _actionTypes.REQUESTED_FEATURED_ITEM_REMOVAL:return _extends({},state,{isRemoving:!0,removePosition:action.position,hasRemoveError:!1});case _actionTypes.HANDLE_FEATURED_ITEM_REMOVAL_SUCCESS:return _extends({},state,{contentList:_lodash2.default.set(_lodash2.default.clone(state.contentList),action.position,null),isRemoving:!1,removePosition:null,hasRemoveError:!1});case _actionTypes.HANDLE_FEATURED_ITEM_REMOVAL_ERROR:return _extends({},state,{isRemoving:!1,removePosition:null,hasRemoveError:!0});default:return state}};var _lodash2=_interopRequireDefault(__webpack_require__(2)),_featuredContent=__webpack_require__(2852),_viewSelector2=_interopRequireDefault(__webpack_require__(2851)),_story2=_interopRequireDefault(__webpack_require__(2850)),_externalResource2=_interopRequireDefault(__webpack_require__(2849)),_actionTypes=__webpack_require__(149);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var contentList,initialState={contentList:(contentList=[null,null,null],_lodash2.default.get(window.initialState,"featuredContent",[]).forEach(function(item){contentList[item.position]=item}),contentList),isEditing:!1,editType:null,editPosition:null,isSaving:!1,isSaved:!1,hasSaveError:!1,isSavingViewUid:"",isRemoving:!1,removePosition:null,hasRemoveError:!1}},2854:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(state,action){if(_lodash2.default.isUndefined(state))return _lodash2.default.extend({},_lodash2.default.get(window.initialState,"view",{}),{isPublishing:!1,hasPublishingError:!1,hasPublishingSuccess:!1});switch(action.type){case _actionTypes.REQUESTED_VIEW_PUBLISH:return _extends({},state,{isPublishing:!0,hasPublishingSuccess:!1,hasPublishingError:!1});case _actionTypes.HANDLE_VIEW_PUBLISH_SUCCESS:return _extends({},state,{isPublishing:!1,hasPublishingSuccess:!0,hasPublishingError:!1});case _actionTypes.HANDLE_VIEW_PUBLISH_ERROR:return _extends({},state,{isPublishing:!1,hasPublishingSuccess:!1,hasPublishingError:!0});case _actionTypes.CLEAR_VIEW_PUBLISH_ERROR:return _extends({},state,{hasPublishingError:!1});case _actionTypes.ON_SUBSCRIPTION_CHANGE:case _actionTypes.CHECK_SUBSCRIPTION_ON_LOAD:return _extends({},state,{subscriptionId:action.subscriptionId,subscribed:action.subscribed});case _actionTypes.HANDLE_CHECK_SUBSCRIPTION_ON_LOAD_ERROR:return _extends({},state,{subscribed:!1,subscriptionId:null});case _actionTypes.HANDLE_FETCH_ROW_COUNT_SUCCESS:return _extends({},state,{rowCount:action.rowCount});case _actionTypes.HANDLE_FETCH_ROW_COUNT_ERROR:return _extends({},state,{rowCount:null});case _actionTypes.HANDLE_ALERT_SAVE_SUCCESS:return _extends({},state,{showAlertSavedNotice:!0});case _actionTypes.HANDLE_ALERT_NOTICE_CLOSE:return _extends({},state,{showAlertSavedNotice:!1});default:return state}};var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj},_actionTypes=__webpack_require__(149)},2855:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState;switch(arguments[1].type){case"API_CALL_STARTED":return[].concat(_toConsumableArray(state),[{status:"STATUS_CALL_IN_PROGRESS"}]);case"API_CALL_SUCCEEDED":return[].concat(_toConsumableArray(state),[{status:"STATUS_CALL_SUCCEEDED",succeededAt:new Date}]);case"API_CALL_FAILED":return[].concat(_toConsumableArray(state),[{status:"STATUS_CALL_FAILED"}]);default:return state}};var initialState=[]},2856:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _redux=__webpack_require__(14),_associateCollections2=_interopRequireDefault(__webpack_require__(2855)),_view2=_interopRequireDefault(__webpack_require__(2854)),_featuredContent2=_interopRequireDefault(__webpack_require__(2853)),_relatedViews2=_interopRequireDefault(__webpack_require__(2848)),_contactForm2=_interopRequireDefault(__webpack_require__(2847));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=(0,_redux.combineReducers)({associateCollections:_associateCollections2.default,view:_view2.default,featuredContent:_featuredContent2.default,relatedViews:_relatedViews2.default,contactForm:_contactForm2.default})},2857:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _redux=__webpack_require__(14),_reduxThunk2=_interopRequireDefault(__webpack_require__(140)),_reduxLogger2=_interopRequireDefault(__webpack_require__(181)),_reducers2=_interopRequireDefault(__webpack_require__(2856)),_view=__webpack_require__(307);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var middleware=[_reduxThunk2.default];"development"===window.serverConfig.environment&&middleware.push((0,_reduxLogger2.default)({duration:!0,timestamp:!1,collapsed:!0}));var store=(0,_redux.createStore)(_reducers2.default,_redux.applyMiddleware.apply(void 0,middleware));store.dispatch((0,_view.fetchRowCount)()),store.dispatch((0,_view.checkSubscription)()),exports.default=store},2858:function(module,exports,__webpack_require__){"use strict";var _lodash2=_interopRequireDefault(__webpack_require__(2)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_components2=_interopRequireDefault(__webpack_require__(9)),_analytics=__webpack_require__(525),_reactRedux=__webpack_require__(4),metrics=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(949)),_airbrake2=_interopRequireDefault(__webpack_require__(36)),_dslp_cross_origin_errors2=_interopRequireDefault(__webpack_require__(948)),_store2=_interopRequireDefault(__webpack_require__(2857)),_root2=_interopRequireDefault(__webpack_require__(2846)),_DynamicContent2=_interopRequireDefault(__webpack_require__(2809));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}window._=_lodash2.default,"development"!==window.serverConfig.environment&&(_airbrake2.default.init(window.serverConfig.airbrakeProjectId,window.serverConfig.airbrakeKey),_airbrake2.default.addFilter(_dslp_cross_origin_errors2.default)),_lodash2.default.defer(function(){window.lastAccessed&&window.lastAccessed.add(window.initialState.view.id);try{_reactDom2.default.render(_react2.default.createElement(_root2.default,{store:_store2.default}),document.querySelector("#app"))}catch(e){return console.error("Fatal error when rendering:",e),void _reactDom2.default.render(_react2.default.createElement("div",{className:"alert error alert-full-width-top"},I18n.render_error),document.querySelector("#app"))}var footer=document.querySelector("#site-chrome-footer");footer&&(footer.style.visibility="visible"),_lodash2.default.defer(function(){_reactDom2.default.render(_react2.default.createElement(_reactRedux.Provider,{store:_store2.default},_react2.default.createElement(_DynamicContent2.default,null)),document.querySelector("#dynamic-content")),_components2.default.attachTo(document.querySelector(".dataset-landing-page"));var analytics=new _analytics.Analytics;analytics.sendMetric("domain","js-page-view",1),analytics.sendMetric("domain","js-page-view-dataset",1),analytics.flushMetrics(),metrics.sendAnalytics(window.initialState.view.id)})})},2859:function(module,exports,__webpack_require__){module.exports=__webpack_require__(2858)},307:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkSubscription=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.requestedViewPublish=requestedViewPublish,exports.handleViewPublishSuccess=handleViewPublishSuccess,exports.handleViewPublishError=handleViewPublishError,exports.clearViewPublishError=function(){return{type:_actionTypes.CLEAR_VIEW_PUBLISH_ERROR}},exports.handleFetchRowCountSuccess=handleFetchRowCountSuccess,exports.handleFetchRowCountError=handleFetchRowCountError,exports.onSubscriptionChange=function(subscriptionId){return{type:_actionTypes.ON_SUBSCRIPTION_CHANGE,subscriptionId:subscriptionId,subscribed:_lodash2.default.isNumber(subscriptionId)&&!_lodash2.default.isNaN(subscriptionId)}},exports.handleAlertSaveSuccess=function(){return{type:_actionTypes.HANDLE_ALERT_SAVE_SUCCESS}},exports.handleAlertNoticeClose=function(){return{type:_actionTypes.HANDLE_ALERT_NOTICE_CLOSE}},exports.checkSubscriptionOnLoad=checkSubscriptionOnLoad,exports.handleCheckSubscriptionOnLoadError=handleCheckSubscriptionOnLoadError,exports.publishView=function(){return function(dispatch,getState){var viewId=getState().view.id,fetchOptions={method:"POST",headers:_extends({},_http.defaultHeaders,{"X-Socrata-Federation":"Honey Badger"}),credentials:"same-origin"};return dispatch(requestedViewPublish()),fetch("/api/views/"+viewId+"/publication.json",fetchOptions).then(_http.checkStatus).then(function(response){return response.json()}).then(function(publishedView){dispatch(handleViewPublishSuccess()),(0,_http.redirectTo)(window.location.href.replace(viewId,publishedView.id),1e3)}).catch(function(){return dispatch(handleViewPublishError())})}},exports.fetchRowCount=function(){return function(dispatch,getState){var viewId=getState().view.id,fetchOptions={method:"GET",headers:_extends({},_http.defaultHeaders,{"X-Socrata-Federation":"Honey Badger"}),credentials:"same-origin"};return fetch("/api/id/"+viewId+"?$query=select count(*) as COLUMN_ALIAS_GUARD__count",fetchOptions).then(_http.checkStatus).then(function(response){return response.json()}).then(function(apiResponse){var rowCountOBE=_lodash2.default.get(apiResponse,"[0].column_alias_guard__count",null),rowCountNBE=_lodash2.default.get(apiResponse,"[0].COLUMN_ALIAS_GUARD__count",null),rowCount=null;_lodash2.default.isString(rowCountNBE)?rowCount=_lodash2.default.toNumber(rowCountNBE):_lodash2.default.isString(rowCountOBE)&&(rowCount=_lodash2.default.toNumber(rowCountOBE)),dispatch(handleFetchRowCountSuccess(rowCount))}).catch(function(){return dispatch(handleFetchRowCountError())})}};var obj,_lodash=__webpack_require__(2),_lodash2=(obj=_lodash)&&obj.__esModule?obj:{default:obj};__webpack_require__(42);var _http=__webpack_require__(25),_actionTypes=__webpack_require__(149);function requestedViewPublish(){return{type:_actionTypes.REQUESTED_VIEW_PUBLISH}}function handleViewPublishSuccess(){return{type:_actionTypes.HANDLE_VIEW_PUBLISH_SUCCESS}}function handleViewPublishError(){return{type:_actionTypes.HANDLE_VIEW_PUBLISH_ERROR}}function handleFetchRowCountSuccess(rowCount){return{type:_actionTypes.HANDLE_FETCH_ROW_COUNT_SUCCESS,rowCount:rowCount}}function handleFetchRowCountError(){return{type:_actionTypes.HANDLE_FETCH_ROW_COUNT_ERROR}}function checkSubscriptionOnLoad(subscriptionId){return{type:_actionTypes.CHECK_SUBSCRIPTION_ON_LOAD,subscriptionId:subscriptionId,subscribed:_lodash2.default.isNumber(subscriptionId)&&!_lodash2.default.isNaN(subscriptionId)}}function handleCheckSubscriptionOnLoadError(){return{type:_actionTypes.HANDLE_CHECK_SUBSCRIPTION_ON_LOAD_ERROR}}exports.checkSubscription=function(){return function(dispatch,getState){var fetchOptions={method:"GET",headers:_extends({},_http.defaultHeaders,{"X-Socrata-Federation":"Honey Badger"}),credentials:"same-origin"},viewId=getState().view.id,fetchUrl="/api/notifications_and_alerts/subscriptions?dataset_domain="+window.location.host+"&dataset="+viewId+"&activity=WATCH_DATASET";return fetch(fetchUrl,fetchOptions).then(_http.checkStatus).then(function(response){return response.json()}).then(function(response){var subscriptionResponse=response.data;dispatch(checkSubscriptionOnLoad(_lodash2.default.get(subscriptionResponse[0],"id",null)))}).catch(function(){return dispatch(handleCheckSubscriptionOnLoadError())})}}},369:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addFeaturedItem=function(type,position){return{type:_actionTypes.ADD_FEATURED_ITEM,editType:type,position:position}},exports.editFeaturedItem=function(featuredItem){return{type:_actionTypes.EDIT_FEATURED_ITEM,featuredItem:featuredItem}},exports.cancelFeaturedItemEdit=cancelFeaturedItemEdit,exports.requestedFeaturedItemSave=requestedFeaturedItemSave,exports.handleFeaturedItemSaveSuccess=handleFeaturedItemSaveSuccess,exports.handleFeaturedItemSaveError=handleFeaturedItemSaveError,exports.saveFeaturedItem=function(options){return function(dispatch,getState){var state=getState(),viewId=state.view.id,featuredContent=state.featuredContent,editType=featuredContent.editType,editPosition=featuredContent.editPosition,payload=void 0;if("visualization"===editType)dispatch(setSavingFeaturedItem(options.featuredLensUid)),payload={featuredLensUid:options.featuredLensUid,contentType:"internal",position:editPosition};else if("story"===editType)payload={featuredLensUid:parseUid(featuredContent.story.url),position:editPosition,contentType:"internal",url:trimEditFromUrl(featuredContent.story.url)};else{if("externalResource"!==editType)return console.error('Asked to save a featured item, but the current editType is "'+editType+'". Expected one of "visualization", "story", or "externalResource".');var previewImageId=_.get(featuredContent.externalResource,"previewImageId",_.get(featuredContent.externalResource,"previewImage","")),matches=previewImageId.match(/base64,([^\s]+)$/),previewImageBase64=_.isNull(matches)?null:matches[1];payload={description:featuredContent.externalResource.description,previewImageBase64:previewImageBase64,title:featuredContent.externalResource.title,url:featuredContent.externalResource.url,position:editPosition,contentType:"external"}}var fetchOptions={method:"POST",credentials:"same-origin",headers:_http.defaultHeaders,body:JSON.stringify(payload)};dispatch(requestedFeaturedItemSave()),fetch("/dataset_landing_page/"+viewId+"/featured_content",fetchOptions).then(_http.checkStatus).then(function(response){return response.json()}).then(function(response){dispatch(handleFeaturedItemSaveSuccess(response,editPosition)),_.delay(dispatch,1500,cancelFeaturedItemEdit())}).catch(function(){return dispatch(handleFeaturedItemSaveError())})}},exports.requestedFeaturedItemRemoval=requestedFeaturedItemRemoval,exports.handleFeaturedItemRemovalSuccess=handleFeaturedItemRemovalSuccess,exports.handleFeaturedItemRemovalError=handleFeaturedItemRemovalError,exports.removeFeaturedItem=function(position){return function(dispatch,getState){var state=getState(),viewId=state.view.id,fetchOptions={method:"DELETE",credentials:"same-origin",headers:_http.defaultHeaders};dispatch(requestedFeaturedItemRemoval(position)),fetch("/dataset_landing_page/"+viewId+"/featured_content/"+position,fetchOptions).then(_http.checkStatus).then(function(response){return response.json()}).then(function(){return dispatch(handleFeaturedItemRemovalSuccess(position))}).catch(function(){return dispatch(handleFeaturedItemRemovalError())})}},exports.setExternalResourceField=function(field,value){return{type:_actionTypes.SET_EXTERNAL_RESOURCE_FIELD,field:field,value:value}},exports.setStoryUrlField=function(value){return{type:_actionTypes.SET_STORY_URL_FIELD,value:value}},exports.requestedStory=requestedStory,exports.handleLoadingStoryError=handleLoadingStoryError,exports.handleLoadingStorySuccess=handleLoadingStorySuccess,exports.loadStory=function(){return function(dispatch,getState){var state=getState(),uid=parseUid(state.featuredContent.story.url);dispatch(requestedStory()),fetch("/dataset_landing_page/formatted_view/"+uid,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(_http.checkStatus).then(function(response){return response.json()}).then(function(response){return dispatch(handleLoadingStorySuccess(response))}).catch(function(){return dispatch(handleLoadingStoryError())})}},exports.setSavingFeaturedItem=setSavingFeaturedItem,exports.requestDerivedViews=function(){return function(dispatch,getState){var state=getState(),viewId=state.view.id,fetchUrl="/dataset_landing_page/"+viewId+"/derived_views?sort_by=date";dispatch(requestedDerivedViews()),fetch(fetchUrl,{credentials:"same-origin"}).then(_http.checkStatus).then(function(response){return response.json()}).then(function(response){return dispatch(receiveDerivedViews(response))}).catch(function(){return dispatch(handleDerivedViewsError())})}},exports.requestedDerivedViews=requestedDerivedViews,exports.receiveDerivedViews=receiveDerivedViews,exports.handleDerivedViewsError=handleDerivedViewsError,__webpack_require__(42);var _http=__webpack_require__(25),_constants=__webpack_require__(219),_actionTypes=__webpack_require__(149);function parseUid(url){return trimEditFromUrl(url).match(_constants.TRAILING_UID_REGEX)[1]||""}function trimEditFromUrl(url){return url.replace(/\/?edit\/?$/,"")}function cancelFeaturedItemEdit(){return{type:_actionTypes.CANCEL_FEATURED_ITEM_EDIT}}function requestedFeaturedItemSave(){return{type:_actionTypes.REQUESTED_FEATURED_ITEM_SAVE}}function handleFeaturedItemSaveSuccess(featuredItem,position){return{type:_actionTypes.HANDLE_FEATURED_ITEM_SAVE_SUCCESS,featuredItem:featuredItem,position:position}}function handleFeaturedItemSaveError(){return{type:_actionTypes.HANDLE_FEATURED_ITEM_SAVE_ERROR}}function requestedFeaturedItemRemoval(position){return{type:_actionTypes.REQUESTED_FEATURED_ITEM_REMOVAL,position:position}}function handleFeaturedItemRemovalSuccess(position){return{type:_actionTypes.HANDLE_FEATURED_ITEM_REMOVAL_SUCCESS,position:position}}function handleFeaturedItemRemovalError(){return{type:_actionTypes.HANDLE_FEATURED_ITEM_REMOVAL_ERROR}}function requestedStory(){return{type:_actionTypes.REQUESTED_STORY}}function handleLoadingStoryError(){return{type:_actionTypes.HANDLE_LOADING_STORY_ERROR}}function handleLoadingStorySuccess(story){return{type:_actionTypes.HANDLE_LOADING_STORY_SUCCESS,story:story}}function setSavingFeaturedItem(viewUid){return{type:_actionTypes.SET_SAVING_FEATURED_ITEM,viewUid:viewUid}}function requestedDerivedViews(){return{type:_actionTypes.REQUESTED_DERIVED_VIEWS}}function receiveDerivedViews(views){return{type:_actionTypes.RECEIVE_DERIVED_VIEWS,views:views}}function handleDerivedViewsError(){return{type:_actionTypes.HANDLE_DERIVED_VIEWS_REQUEST_ERROR}}},370:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.approve_nominations="approve_nominations",exports.change_configurations="change_configurations",exports.chown_datasets="chown_datasets",exports.create_dashboards="create_dashboards",exports.create_datasets="create_datasets",exports.create_measures="create_measures",exports.create_pages="create_pages",exports.create_story="create_story",exports.delete_story="delete_story",exports.edit_dashboards="edit_dashboards",exports.edit_goals="edit_goals",exports.edit_others_datasets="edit_others_datasets",exports.edit_pages="edit_pages",exports.edit_sdp="edit_sdp",exports.edit_story="edit_story",exports.create_story_copy="create_story_copy",exports.edit_nominations="edit_nominations",exports.edit_site_theme="edit_site_theme",exports.edit_story_title_desc="edit_story_title_desc",exports.feature_items="feature_items",exports.federations="federations",exports.manage_approval="manage_approval",exports.manage_provenance="manage_provenance",exports.manage_role_definitions="manage_role_definitions",exports.manage_spatial_lens="manage_spatial_lens",exports.manage_stories="manage_stories",exports.manage_story_collaborators="manage_story_collaborators",exports.manage_story_public_version="manage_story_public_version",exports.manage_story_visibility="manage_story_visibility",exports.manage_users="manage_users",exports.moderate_comments="moderate_comments",exports.use_data_connectors="use_data_connectors",exports.view_all_dataset_status_logs="view_all_dataset_status_logs",exports.view_dashboards="view_dashboards",exports.view_domain="view_domain",exports.view_goals="view_goals",exports.view_others_datasets="view_others_datasets",exports.view_unpublished_story="view_unpublished_story"},463:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FeaturedContentModalHeader=function(_PureComponent){function FeaturedContentModalHeader(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FeaturedContentModalHeader),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FeaturedContentModalHeader.__proto__||Object.getPrototypeOf(FeaturedContentModalHeader)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FeaturedContentModalHeader,_react.PureComponent),_createClass(FeaturedContentModalHeader,[{key:"render",value:function(){var onClickClose=this.props.onClickClose;return _react2.default.createElement("header",{className:"modal-header"},_react2.default.createElement("h1",null,I18n.featured_content_modal.header),_react2.default.createElement("button",{className:"btn btn-transparent modal-header-dismiss","data-modal-dismiss":!0,"aria-label":I18n.close,onClick:onClickClose},_react2.default.createElement("span",{className:"icon-close-2"})))}}]),FeaturedContentModalHeader}();FeaturedContentModalHeader.propTypes={onClickClose:_propTypes2.default.func},exports.default=FeaturedContentModalHeader},6:function(module,exports){module.exports=jQuery},626:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_classnames2=_interopRequireDefault(__webpack_require__(8)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FormFooter=function(_Component){function FormFooter(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FormFooter),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FormFooter.__proto__||Object.getPrototypeOf(FormFooter)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FormFooter,_react.Component),_createClass(FormFooter,[{key:"renderSaveButton",value:function(){var _props=this.props,canSave=_props.canSave,displaySaveButton=_props.displaySaveButton,isSaved=_props.isSaved,isSaving=_props.isSaving,onClickSave=_props.onClickSave,saveText=_props.saveText,savedText=_props.savedText;if(!displaySaveButton)return null;var saveButtonClassName=(0,_classnames2.default)({btn:!0,"btn-sm":!0,"btn-success":isSaved,"btn-primary":!isSaved,"btn-busy":isSaving,"save-button":!0}),saveButtonContents=void 0;return saveButtonContents=isSaving?_react2.default.createElement("div",{"aria-label":I18n.saving,className:"spinner-default spinner-btn-primary"}):isSaved?savedText:saveText,_react2.default.createElement("button",{key:"save",className:saveButtonClassName,disabled:isSaving||!canSave,onClick:onClickSave},saveButtonContents)}},{key:"render",value:function(){var _props2=this.props,cancelText=_props2.cancelText,onClickCancel=_props2.onClickCancel;return _react2.default.createElement("footer",{className:"modal-footer"},_react2.default.createElement("div",{className:"modal-footer-actions"},_react2.default.createElement("button",{key:"cancel",className:"btn btn-default btn-sm cancel-button",onClick:onClickCancel},cancelText),this.renderSaveButton()))}}]),FormFooter}();FormFooter.propTypes={cancelText:_propTypes2.default.string,canSave:_propTypes2.default.bool,displaySaveButton:_propTypes2.default.bool,isSaved:_propTypes2.default.bool,isSaving:_propTypes2.default.bool,onClickCancel:_propTypes2.default.func,onClickSave:_propTypes2.default.func,saveText:_propTypes2.default.string,savedText:_propTypes2.default.string},exports.default=FormFooter},628:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.RELATED_VIEWS_FETCH_LIMIT=3},939:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BootstrapAlert=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__(24)),_reactRedux=__webpack_require__(4),_classnames2=_interopRequireDefault(__webpack_require__(8)),_components2=_interopRequireDefault(__webpack_require__(9)),_locale=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BootstrapAlert=exports.BootstrapAlert=function(_Component){function BootstrapAlert(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BootstrapAlert),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BootstrapAlert.__proto__||Object.getPrototypeOf(BootstrapAlert)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BootstrapAlert,_react.Component),_createClass(BootstrapAlert,[{key:"componentWillMount",value:function(){this.uniqueId=_lodash2.default.uniqueId()}},{key:"componentDidMount",value:function(){_components2.default.factories.FlyoutFactory(_reactDom2.default.findDOMNode(this))}},{key:"render",value:function(){var _props=this.props,bootstrapUrl=_props.bootstrapUrl,onClickBootstrap=_props.onClickBootstrap,isDisabled=!_lodash2.default.isString(bootstrapUrl),className="btn btn-sm btn-alternate-2",flyoutId=void 0,flyout=void 0;return isDisabled&&(className=(0,_classnames2.default)(className,"btn-disabled"),flyoutId="bootstrap-flyout-"+this.uniqueId,flyout=_react2.default.createElement("div",{id:flyoutId,className:"flyout flyout-hidden"},_react2.default.createElement("section",{className:"flyout-content"},_react2.default.createElement("p",null,I18n.bootstrap_disabled_notice)),_react2.default.createElement("footer",{className:"flyout-footer"}))),_react2.default.createElement("div",{className:"alert default bootstrap-alert"},_react2.default.createElement("div",{className:"message"},I18n.bootstrap_message),_react2.default.createElement("a",{href:isDisabled?null:(0,_locale.localizeLink)(bootstrapUrl),className:className,"data-flyout":flyoutId,onClick:isDisabled?null:onClickBootstrap,tabIndex:"0",disabled:isDisabled,role:"link"},I18n.bootstrap_button),flyout)}}]),BootstrapAlert}();BootstrapAlert.propTypes={bootstrapUrl:_propTypes2.default.string,onClickBootstrap:_propTypes2.default.func},exports.default=(0,_reactRedux.connect)(null,function(){return{onClickBootstrap:function(){}}})(BootstrapAlert)},940:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subscriptionStore=void 0,__webpack_require__(42);var obj,_airbrake=__webpack_require__(36),_airbrake2=(obj=_airbrake)&&obj.__esModule?obj:{default:obj},_http=__webpack_require__(25);function checkStatus(response){var errorMessage=void 0;if(401!==response.status&&403!==response.status){if(response.status>=200&&response.status<300)return response;errorMessage=response.statusText;try{_airbrake2.default.notify({error:"Error while subscribe dataset: "+errorMessage})}catch(err){}throw new Error(errorMessage)}window.location.reload()}var subscriptionStore=exports.subscriptionStore={subscribe:function(datasetId){return fetch("/api/notifications_and_alerts/subscriptions",{method:"POST",headers:_http.defaultHeaders,credentials:"same-origin",body:JSON.stringify({subscription:{domain:window.location.host,dataset:datasetId,activity:"WATCH_DATASET"}})}).then(checkStatus).then(function(response){return response.json()}).then(function(subscribedResult){return subscribedResult.data})},unsubscribe:function(subscriptionId){return fetch("/api/notifications_and_alerts/subscriptions/"+subscriptionId,{method:"DELETE",headers:_http.defaultHeaders,credentials:"same-origin"}).then(checkStatus).then(function(response){return response.json()}).then(function(unsubscribedResult){return unsubscribedResult.data})}};exports.default=subscriptionStore},941:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.showAccessManager=function(e,onAccessManagerShown){var mode=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"change_audience";if(_.get(window,"socrata.featureFlags.enable_new_dataset_sharing_ux",!1)){onAccessManagerShown&&onAccessManagerShown();window.socrata.showAccessManager(mode,!0),e.preventDefault()}}},942:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash2=_interopRequireDefault(__webpack_require__(2)),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_CopyButton2=_interopRequireDefault(__webpack_require__(2833)),_Dropdown2=_interopRequireDefault(__webpack_require__(57));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResourceToggle=function(_Component){function ResourceToggle(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ResourceToggle);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ResourceToggle.__proto__||Object.getPrototypeOf(ResourceToggle)).call(this,props));return _this.state={selectedResourceUrl:props.types.filter(function(type){return type.defaultType})[0].url},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ResourceToggle,_react.Component),_createClass(ResourceToggle,[{key:"onFocusInput",value:function(event){event.target.select()}},{key:"onSubmit",value:function(event){event.preventDefault()}},{key:"renderResourceToggle",value:function(){var _this2=this,types=this.props.types,selectedResourceUrl=this.state.selectedResourceUrl,props={onSelection:function(selected){return _this2.setState({selectedResourceUrl:selected.value})},options:_lodash2.default.map(types,function(type){return{title:type.label,value:type.url}}),size:"small",placeholder:types.find(function(opt){return opt.url===selectedResourceUrl}).label};return _react2.default.createElement(_Dropdown2.default,props)}},{key:"render",value:function(){var selectedResourceUrl=this.state.selectedResourceUrl,_props=this.props,title=_props.title,section=_props.section,onClickCopy=_props.onClickCopy,urlProps={"aria-labelledby":"endpoint",className:"endpoint-input text-input text-input-sm",type:"text",value:selectedResourceUrl,onFocus:this.onFocusInput,readOnly:!0};return _react2.default.createElement("div",{className:"endpoint"},_react2.default.createElement("h6",{id:"endpoint",className:"title"},title),_react2.default.createElement("form",{onSubmit:this.onSubmit},_react2.default.createElement("span",{className:"input-group"},_react2.default.createElement("input",urlProps),this.renderResourceToggle(),_react2.default.createElement(_CopyButton2.default,{section:section,onClickCopy:onClickCopy}))))}}]),ResourceToggle}();ResourceToggle.propTypes={onClickCopy:_propTypes2.default.func.isRequired,types:_propTypes2.default.arrayOf(_propTypes2.default.object).isRequired,title:_propTypes2.default.string.isRequired,section:_propTypes2.default.string.isRequired},exports.default=ResourceToggle},945:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_components=__webpack_require__(9),_viewCardHelpers=__webpack_require__(231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FeaturedViewCard=function(_PureComponent){function FeaturedViewCard(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FeaturedViewCard),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FeaturedViewCard.__proto__||Object.getPrototypeOf(FeaturedViewCard)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FeaturedViewCard,_react.PureComponent),_createClass(FeaturedViewCard,[{key:"render",value:function(){var _props=this.props,children=_props.children,featuredItem=_props.featuredItem,cardProps=(0,_viewCardHelpers.getViewCardPropsForFeaturedItem)(featuredItem);return"external"===featuredItem.contentType?_react2.default.createElement(_components.ExternalViewCard,cardProps,children):"internal"===featuredItem.contentType?_react2.default.createElement(_components.ViewCard,cardProps,children):void 0}}]),FeaturedViewCard}();FeaturedViewCard.propTypes={children:_propTypes2.default.node,featuredItem:_propTypes2.default.object},exports.default=FeaturedViewCard},946:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Notice=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(1)),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_a11yHelpers=__webpack_require__(371);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notice=exports.Notice=function(_Component){function Notice(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Notice),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Notice.__proto__||Object.getPrototypeOf(Notice)).apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Notice,_react.Component),_createClass(Notice,[{key:"render",value:function(){var _props=this.props,children=_props.children,onClickDismiss=_props.onClickDismiss;return _react2.default.createElement("div",{className:"alert info alert-full-width-top private-notice"},_react2.default.createElement("div",{className:"alert-container"},children,_react2.default.createElement("span",{className:"icon-close-2 alert-dismiss","aria-label":I18n.close,role:"button",tabIndex:"0",onClick:onClickDismiss,onKeyDown:(0,_a11yHelpers.handleKeyPress)(onClickDismiss)})))}}]),Notice}();Notice.propTypes={children:_propTypes2.default.node,onClickDismiss:_propTypes2.default.func.isRequired},exports.default=Notice},947:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={mobile:420,tablet:768}}});
//# sourceMappingURL=datasetLandingPageMain.js.map